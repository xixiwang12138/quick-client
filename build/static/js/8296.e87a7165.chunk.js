"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[8296],{8296:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var l=a(72791),s=a(29945),n=a(87995),i=a(44690),c=a(31776),r=a(66315),o=a(56028),u=a(23814),d=a(80184);const x=e=>{let{open:t,selectedBucket:a,closeModalAndRefresh:x}=e;const b=(0,i.TL)(),[m,p]=(0,l.useState)(!1),[h,f]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),[g,k]=(0,l.useState)(""),[S,C]=(0,l.useState)([]),[F,E]=(0,l.useState)([]),L=(0,l.useCallback)((()=>{p(!0),c.h.admin.arnList().then((e=>{null!==e.data.arns&&E(e.data.arns),p(!1)})).catch((e=>{p(!1),b((0,n.zb)(e))}))}),[b]);(0,l.useEffect)((()=>{L()}),[L]);const R=[{label:"PUT - Object Uploaded",value:r.Ln.Put},{label:"GET - Object accessed",value:r.Ln.Get},{label:"DELETE - Object Deleted",value:r.Ln.Delete},{label:"REPLICA - Object Replicated",value:r.Ln.Replica},{label:"ILM - Object Transitioned",value:r.Ln.Ilm},{label:"SCANNER - Object has too many versions / Prefixes has too many sub-folders",value:r.Ln.Scanner}],w=null===F||void 0===F?void 0:F.map((e=>({label:e,value:e})));return(0,d.jsx)(o.Z,{modalOpen:t,onClose:()=>{x()},title:"Subscribe To Bucket Events",titleIcon:(0,d.jsx)(s.c3W,{}),children:(0,d.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),m||(p(!0),c.h.buckets.createBucketEvent(a,{configuration:{arn:g,events:S,prefix:h,suffix:j},ignoreExisting:!0}).then((()=>{p(!1),x()})).catch((e=>{p(!1),b((0,n.zb)(e))})))},children:(0,d.jsxs)(s.rjZ,{container:!0,children:[(0,d.jsxs)(s.rjZ,{item:!0,xs:12,sx:u.oO.formScrollable,children:[(0,d.jsx)(s.rjZ,{item:!0,xs:12,sx:{...u.DF.formFieldRow,"& div div .MuiOutlinedInput-root":{padding:0}},children:(0,d.jsx)(s.F2H,{onChange:e=>{k(e)},id:"select-access-policy",name:"select-access-policy",label:"ARN",value:g,options:w||[],helpTip:(0,d.jsx)(l.Fragment,{children:(0,d.jsx)("a",{target:"blank",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/reference-arns.html",children:"Amazon Resource Name"})})})}),(0,d.jsx)(s.rjZ,{item:!0,xs:12,sx:u.DF.formFieldRow,children:(0,d.jsx)(s.Wzg,{id:"prefix-input",name:"prefix-input",label:"Prefix",value:h,onChange:e=>{f(e.target.value)}})}),(0,d.jsx)(s.rjZ,{item:!0,xs:12,sx:u.DF.formFieldRow,children:(0,d.jsx)(s.Wzg,{id:"suffix-input",name:"suffix-input",label:"Suffix",value:j,onChange:e=>{v(e.target.value)}})}),(0,d.jsx)(s.rjZ,{item:!0,xs:12,sx:u.DF.formFieldRow,children:(0,d.jsx)(s.wQF,{columns:[{label:"Event",elementKey:"label"}],idField:"value",records:R,onSelect:e=>{const t=e.target,a=t.value,l=t.checked;let s=[...S];l?s.push(a):s=s.filter((e=>e!==a)),C(s)},selectedItems:S,noBackground:!0,customPaperHeight:"260px"})})]}),(0,d.jsxs)(s.rjZ,{item:!0,xs:12,sx:u.ID.modalButtonBar,children:[(0,d.jsx)(s.zxk,{id:"cancel-add-event",type:"button",variant:"regular",disabled:m,onClick:()=>{x()},label:"Cancel"}),(0,d.jsx)(s.zxk,{id:"save-event",type:"submit",variant:"callAction",disabled:m||""===g||0===S.length,label:"Save"})]})]})})})}}}]);
//# sourceMappingURL=8296.e87a7165.chunk.js.map