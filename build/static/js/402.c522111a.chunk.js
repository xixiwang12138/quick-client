"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[402],{70402:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var s=n(72791),l=n(29945),a=n(31776),i=n(82342),r=n(87995),c=n(44690),o=n(59447),d=n(23814),u=n(80184);const x=e=>{let{closeVersioningModalAndRefresh:t,modalOpen:n,selectedBucket:x,versioningInfo:h={},objectLockingEnabled:g}=e;const f=(0,c.TL)(),[p,m]=(0,s.useState)(!1),[v,b]=(0,s.useState)("Enabled"===(null===h||void 0===h?void 0:h.status)),[j,k]=(0,s.useState)(!(null===h||void 0===h||!h.excludeFolders)),[w,C]=(0,s.useState)((e=>{const t=null===e||void 0===e?void 0:e.excludedPrefixes;return t?t.map((e=>e.prefix)).join(","):""})(h));return(0,u.jsx)(l.cFD,{onClose:()=>t(!1),open:n,title:"Versioning on Bucket",children:(0,u.jsxs)(l.ltY,{withBorders:!1,containerPadding:!1,children:[(0,u.jsx)(l.rsf,{id:"activateVersioning",label:"Versioning Status",checked:v,onChange:e=>{b(e.target.checked)},indicatorLabels:["Enabled","Disabled"]}),v&&!g&&(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)(l.rsf,{id:"excludeFolders",label:"Exclude Folders",checked:j,onChange:e=>{k(e.target.checked)},indicatorLabels:["Enabled","Disabled"]}),(0,u.jsx)(o.Z,{elements:w,label:"Excluded Prefixes",name:"excludedPrefixes",onChange:e=>{let t="";t=Array.isArray(e)?e.join(","):e,C(t)},withBorder:!0})]}),(0,u.jsxs)(l.xuv,{sx:d.ID.modalButtonBar,children:[(0,u.jsx)(l.zxk,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{C(""),k(!1),b(!1)},label:"Clear"}),(0,u.jsx)(l.zxk,{type:"submit",variant:"callAction",onClick:()=>{p||(m(!0),a.h.buckets.setBucketVersioning(x,{enabled:v,excludeFolders:!!v&&j,excludePrefixes:v?w.split(",").filter((e=>""!==e.trim())):[]}).then((()=>{m(!1),t(!0)})).catch((e=>{m(!1),f((0,r.Ih)((0,i.g)(e.error)))})))},id:"saveTag",label:"Save"})]})]})})}},59447:(e,t,n)=>{n.d(t,{Z:()=>c});var s=n(72791),l=n(26181),a=n.n(l),i=n(29945),r=n(80184);const c=e=>{let{elements:t,name:n,label:l,tooltip:c="",commonPlaceholder:o="",onChange:d,withBorder:u=!1}=e;const[x,h]=(0,s.useState)([""]),g=(0,s.createRef)();(0,s.useEffect)((()=>{if(1===x.length&&""===x[0]&&t&&""!==t){const e=t.split(",");e.push(""),h(e)}}),[t,x]),(0,s.useEffect)((()=>{if(x.length>1){const e=g.current;e&&e.scrollIntoView(!1)}}),[x,g]);const f=(0,s.useCallback)((e=>{d(e)}),[d]),p=(0,s.useRef)(!0);(0,s.useEffect)((()=>{if(p.current)return void(p.current=!1);const e=x.filter((e=>""!==e.trim())).join(",");f(e)}),[x]);const m=e=>{e.persist();let t=[...x];const n=a()(e.target,"dataset.index","0");t[parseInt(n)]=e.target.value,h(t)},v=x.map(((e,t)=>(0,r.jsx)(i.Wzg,{id:"".concat(n,"-").concat(t.toString()),label:"",name:"".concat(n,"-").concat(t.toString()),value:x[t],onChange:m,index:t,placeholder:o,overlayIcon:t===x.length-1?(0,r.jsx)(i.dtP,{}):null,overlayAction:()=>{(e=>{if(""!==e[e.length-1].trim()){const t=[...e];t.push(""),h(t)}})(x)}},"csv-multi-".concat(n,"-").concat(t.toString()))));return(0,r.jsx)(s.Fragment,{children:(0,r.jsxs)(i.xuv,{sx:{display:"flex"},className:"inputItem",children:[(0,r.jsxs)(i.AZs,{sx:{alignItems:"flex-start"},children:[(0,r.jsx)("span",{children:l}),""!==c&&(0,r.jsx)(i.xuv,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,r.jsx)(i.ua7,{tooltip:c,placement:"top",children:(0,r.jsx)(i.xuv,{className:c,children:(0,r.jsx)(i.byK,{})})})})]}),(0,r.jsxs)(i.xuv,{withBorders:u,sx:{width:"100%",overflowY:"auto",height:150,position:"relative"},children:[v,(0,r.jsx)("div",{ref:g})]})]})})}}}]);
//# sourceMappingURL=402.c522111a.chunk.js.map