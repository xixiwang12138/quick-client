"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[4563,3956],{23956:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var n=t(72791),r=t(9505),a=t(23508),i=t(29945),c=t(45248),o=t(87995),l=t(44690),d=t(80184);const u=e=>{let{closeDeleteModalAndRefresh:s,deleteOpen:t,selectedServiceAccount:u}=e;const x=(0,l.TL)(),[h,p]=(0,r.Z)((()=>s(!0)),(e=>x((0,o.Ih)(e))));if(!u)return null;return(0,d.jsx)(a.Z,{title:"Delete Access Key",confirmText:"Delete",isOpen:t,titleIcon:(0,d.jsx)(i.NvT,{}),isLoading:h,onConfirm:()=>{p("DELETE","/api/v1/service-accounts/".concat((0,c.LL)(u)))},onClose:()=>s(!1),confirmationContent:(0,d.jsxs)(n.Fragment,{children:["Are you sure you want to delete Access Key"," ",(0,d.jsx)("b",{style:{maxWidth:"200px",whiteSpace:"normal",wordWrap:"break-word"},children:u}),"?"]})})}},37798:(e,s,t)=>{t.d(s,{Z:()=>b});var n=t(72791),r=t(26181),a=t.n(r),i=t(16444),c=t(29945),o=t(56028),l=t(78029),d=t.n(l),u=t(87995),x=t(44690),h=t(80184);const p=e=>{let{label:s="",value:t=""}=e;const n=(0,x.TL)();return(0,h.jsxs)(c.xuv,{sx:{marginTop:12},children:[(0,h.jsx)(c.AZs,{children:s}),(0,h.jsx)(c.bSr,{actionButton:(0,h.jsx)(d(),{text:t,children:(0,h.jsx)(c.zxk,{id:"copy-path",variant:"regular",onClick:()=>{n((0,u.MK)("".concat(s," copied to clipboard")))},style:{marginRight:"5px",width:"28px",height:"28px",padding:"0px"},icon:(0,h.jsx)(c.TIy,{})})}),children:t})]})};var m=t(27454),j=t(23814);const g=i.ZP.div((e=>{let{theme:s}=e;return{color:a()(s,"signalColors.danger","#C51B3F"),fontSize:".85rem",margin:".5rem 0 .5rem 0",display:"flex",alignItems:"center","& svg ":{marginRight:".3rem",height:16,width:16}}})),y=(e,s)=>{let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+s),t.setAttribute("download",e),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},b=e=>{let{newServiceAccount:s,open:t,closeModal:r,entity:i}=e;if(!s)return null;const l=a()(s,"console",null),d=a()(s,"idp",!1);return(0,h.jsx)(o.Z,{modalOpen:t,onClose:()=>{r()},title:"New ".concat(i," Created"),titleIcon:(0,h.jsx)(c.tVY,{}),children:(0,h.jsxs)(c.rjZ,{container:!0,children:[(0,h.jsxs)(c.rjZ,{item:!0,xs:12,children:["A new ",i," has been created with the following details:",!d&&l&&(0,h.jsx)(n.Fragment,{children:(0,h.jsxs)(c.rjZ,{item:!0,xs:12,sx:{overflowY:"auto",maxHeight:350},children:[(0,h.jsx)(c.xuv,{sx:{padding:".8rem 0 0 0",fontWeight:600,fontSize:".9rem"},children:"Console Credentials"}),Array.isArray(l)&&l.map(((e,s)=>(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(p,{label:"Access Key",value:e.accessKey}),(0,h.jsx)(p,{label:"Secret Key",value:e.secretKey})]}))),!Array.isArray(l)&&(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(p,{label:"Access Key",value:l.accessKey}),(0,h.jsx)(p,{label:"Secret Key",value:l.secretKey})]})]})}),(null===l||void 0===l)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p,{label:"Access Key",value:s.accessKey||""}),(0,h.jsx)(p,{label:"Secret Key",value:s.secretKey||""})]}),d?(0,h.jsx)(g,{children:"Please Login via the configured external identity provider."}):(0,h.jsxs)(g,{children:[(0,h.jsx)(c.e6P,{}),(0,h.jsx)("span",{children:"Write these down, as this is the only time the secret will be displayed."})]})]}),(0,h.jsx)(c.rjZ,{item:!0,xs:12,sx:{...j.ID.modalButtonBar},children:!d&&(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(m.Z,{tooltip:"Download credentials in a JSON file formatted for import using mc alias import. This will only include the default login credentials.",children:(0,h.jsx)(c.zxk,{id:"download-button",label:"Download for import",onClick:()=>{let e={};if(l)if(Array.isArray(l)){e=l.map((e=>({url:e.url,accessKey:e.accessKey,secretKey:e.secretKey,api:"s3v4",path:"auto"})))[0]}else e={url:l.url,accessKey:l.accessKey,secretKey:l.secretKey,api:"s3v4",path:"auto"};else e={url:s.url,accessKey:s.accessKey,secretKey:s.secretKey,api:"s3v4",path:"auto"};y("credentials.json",JSON.stringify({...e}))},icon:(0,h.jsx)(c._8t,{}),variant:"callAction"})}),Array.isArray(l)&&l.length>1&&(0,h.jsx)(m.Z,{tooltip:"Download all access credentials to a JSON file. NOTE: This file is not formatted for import using mc alias import. If you plan to import this alias from the file, please use the Download for Import button. ",children:(0,h.jsx)(c.zxk,{id:"download-all-button",label:"Download all access credentials",onClick:()=>{let e={};if(l&&Array.isArray(l)&&l.length>1){e=l.map((e=>({accessKey:e.accessKey,secretKey:e.secretKey})))}y("all_credentials.json",JSON.stringify({...e}))},icon:(0,h.jsx)(c._8t,{}),variant:"callAction",color:"primary"})})]})})]})})}},60680:(e,s,t)=>{t.d(s,{Z:()=>i});t(72791);var n=t(16444),r=t(80184);const a=n.ZP.h1((()=>({padding:0,margin:0,fontSize:".9rem"}))),i=e=>{let{children:s}=e;return(0,r.jsx)(a,{children:s})}},58400:(e,s,t)=>{t.d(s,{Z:()=>h});var n=t(72791),r=t(29945),a=t(21639),i=t(59114),c=t(87995),o=t(44690),l=t(74616),d=t(78687),u=t(31776),x=t(80184);const h=e=>{let{noTitle:s=!1}=e;const t=(0,o.TL)(),[h,p]=(0,n.useState)([]),[m,j]=(0,n.useState)(!1),[g,y]=(0,n.useState)(""),b=(0,d.v9)((e=>e.createUser.selectedPolicies)),f=(0,n.useCallback)((()=>{j(!0),u.h.policies.listPolicies().then((e=>{var s;const t=null!==(s=e.data.policies)&&void 0!==s?s:[];j(!1),p(t.sort(a.g4))})).catch((e=>{j(!1),t((0,c.zb)(e))}))}),[t]);(0,n.useEffect)((()=>{j(!0)}),[]),(0,n.useEffect)((()=>{m&&f()}),[m,f]);const v=h.filter((e=>e.name.includes(g)));return(0,x.jsxs)(r.rjZ,{item:!0,xs:12,className:"inputItem",children:[m&&(0,x.jsx)(r.kod,{}),h.length>0?(0,x.jsxs)(n.Fragment,{children:[(0,x.jsx)(r.rjZ,{item:!0,xs:12,className:"inputItem",children:(0,x.jsx)(i.Z,{placeholder:"Start typing to search for a Policy",onChange:e=>{y(e)},value:g,label:s?"":"Assign Policies"})}),(0,x.jsx)(r.wQF,{columns:[{label:"Policy",elementKey:"name"}],onSelect:e=>{const s=e.target,n=s.value,r=s.checked;let a=[...b];r?a.push(n):a=a.filter((e=>e!==n)),a=a.filter((e=>""!==e)),t((0,l.ue)(a))},selectedItems:b,isLoading:m,records:v,entityName:"Policies",idField:"name",customPaperHeight:"200px"})]}):(0,x.jsx)(r.xuv,{sx:{textAlign:"center",padding:"10px 0"},children:"No Policies Available"})]})}},49076:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var n=t(72791),r=t(57689),a=t(87995),i=t(29945),c=t(45248),o=t(56087),l=t(9505),d=t(23508),u=t(81207),x=t(44690),h=t(80184);const p=e=>{let{closeDeleteModalAndRefresh:s,deleteOpen:t,selectedUsers:p}=e;const m=(0,r.s0)(),j=(0,x.TL)(),g=()=>s(!1),[y,b]=(0,l.Z)((()=>s(!0)),(e=>j((0,a.Ih)(e)))),[f,v]=(0,n.useState)(!0),[S,A]=(0,n.useState)(!1),[C,I]=(0,n.useState)([]),w=localStorage.getItem("userLoggedIn")||"";if((0,n.useEffect)((()=>{p&&u.Z.invoke("POST","/api/v1/users/service-accounts",p).then((e=>{I(e.userServiceAccountList),e.hasSA&&A(!0),v(!1)})).catch((e=>{j((0,a.Ih)(e)),v(!1)}))}),[p,j]),!p)return null;const E=p.map((e=>(0,h.jsx)("div",{children:(0,h.jsx)("b",{children:e})},e))),k=[{type:"view",onClick:e=>{m("".concat(o.gA.USERS,"/").concat((0,c.LL)(e.userName))),g()}}],K="Are you sure you want to delete the following "+p.length+" user"+(p.length>1?"s?":"?");return(0,h.jsx)(d.Z,{title:"Delete User".concat(p.length>1?"s":""),confirmText:"Delete",isOpen:t,titleIcon:(0,h.jsx)(i.NvT,{}),isLoading:y,onConfirm:()=>{for(let e of p)e===w?(j((0,a.Ih)({errorMessage:"Cannot delete currently logged in user",detailedError:"Cannot delete currently logged in user ".concat(w)})),s(!0)):(b("DELETE","/api/v1/user/".concat((0,c.LL)(e))),s(!0),m("".concat(o.gA.USERS)))},onClose:g,confirmationContent:f?(0,h.jsx)(i.aNw,{}):(0,h.jsx)(n.Fragment,{children:S?(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(i.J6i,{variant:"warning",message:(0,h.jsxs)(n.Fragment,{children:["Click on a user to view the full listing of associated Access Keys. All Access Keys associated with a user will be deleted along with the user.",(0,h.jsx)("br",{}),(0,h.jsx)("br",{}),(0,h.jsx)("strong",{children:"Are you sure you want to continue?"})]}),title:"Warning: One or more users selected has associated Access Keys.",sx:{margin:"15px 0"}}),(0,h.jsx)(i.wQF,{itemActions:k,columns:[{label:"Username",elementKey:"userName"},{label:"# Associated Access Keys",elementKey:"numSAs"}],isLoading:f,records:C,entityName:"User Access Keys",idField:"userName",customPaperHeight:"250"})]}):(0,h.jsxs)(n.Fragment,{children:[K,E]})})})}},83658:(e,s,t)=>{t.d(s,{Z:()=>h});var n=t(72791),r=t(26181),a=t.n(r),i=t(29945),c=t(21639),o=t(87995),l=t(44690),d=t(81207),u=t(59114),x=t(80184);const h=e=>{let{selectedGroups:s,setSelectedGroups:t}=e;const r=(0,l.TL)(),[h,p]=(0,n.useState)([]),[m,j]=(0,n.useState)(!1),[g,y]=(0,n.useState)(""),b=(0,n.useCallback)((()=>{d.Z.invoke("GET","/api/v1/groups").then((e=>{let s=a()(e,"groups",[]);s||(s=[]),p(s.sort(c.V2)),j(!1)})).catch((e=>{r((0,o.zb)(e)),j(!1)}))}),[r]);(0,n.useEffect)((()=>{j(!0)}),[]),(0,n.useEffect)((()=>{m&&b()}),[m,b]);const f=s||[],v=h.filter((e=>e.includes(g)));return(0,x.jsxs)(i.rjZ,{item:!0,xs:12,className:"inputItem",children:[m&&(0,x.jsx)(i.kod,{}),null!==h&&h.length>0?(0,x.jsxs)(n.Fragment,{children:[(0,x.jsx)(i.rjZ,{item:!0,xs:12,className:"inputItem",children:(0,x.jsx)(u.Z,{placeholder:"Start typing to search for Groups",onChange:y,value:g,label:"Assign Groups"})}),(0,x.jsx)(i.wQF,{columns:[{label:"Group"}],onSelect:e=>{const s=e.target,n=s.value,r=s.checked;let a=[...f];return r?a.push(n):a=a.filter((e=>e!==n)),t(a),a},selectedItems:f,isLoading:m,records:v,entityName:"Groups",idField:"",customPaperHeight:"200px"})]}):(0,x.jsx)(i.xuv,{sx:{textAlign:"center",padding:"10px 0"},children:"No Groups Available"})]})}},4563:(e,s,t)=>{t.r(s),t.d(s,{default:()=>ee});var n=t(72791),r=t(57689),a=t(50099),i=t(29945),c=t(21639),o=t(23814),l=t(45248),d=t(56087),u=t(81207),x=t(59114),h=t(75578),p=t(38442),m=t(87995),j=t(44690),g=t(27454),y=t(79844),b=t(61342),f=t(80184);const v=(0,h.Z)(n.lazy((()=>Promise.resolve().then(t.bind(t,49076))))),S=(0,h.Z)(n.lazy((()=>t.e(9221).then(t.bind(t,49221))))),A=()=>{const e=(0,j.TL)(),s=(0,r.s0)(),[t,a]=(0,n.useState)([]),[h,A]=(0,n.useState)(!0),[C,I]=(0,n.useState)(!1),[w,E]=(0,n.useState)(!1),[k,K]=(0,n.useState)(""),[_,U]=(0,n.useState)([]),F=(0,p.F)(d.C3,d.Rs),Z=(0,p.F)(d.C3,d.iw),L=(0,p.F)(d.C3,d.uH),T=(0,p.F)(d.C3,d.Yj);(0,n.useEffect)((()=>{h&&(F?u.Z.invoke("GET","/api/v1/users").then((e=>{const s=null===e.users?[]:e.users;A(!1),a(s.sort(c.LQ))})).catch((s=>{A(!1),e((0,m.Ih)(s))})):A(!1))}),[h,e,F]);const P=t.filter((e=>e.accessKey.includes(k))),R=e=>{s("".concat(d.gA.USERS,"/").concat((0,l.LL)(e.accessKey)))},M=[{type:"view",onClick:R,disableButtonFunction:()=>!Z},{type:"edit",onClick:R,disableButtonFunction:()=>!Z}];return(0,n.useEffect)((()=>{e((0,m.Sc)("list_users"))}),[]),(0,f.jsxs)(n.Fragment,{children:[C&&(0,f.jsx)(v,{deleteOpen:C,selectedUsers:_,closeDeleteModalAndRefresh:e=>{(e=>{I(!1),e&&(A(!0),U([]))})(e)}}),w&&(0,f.jsx)(S,{open:w,checkedUsers:_,closeModalAndRefresh:e=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E(!1),e&&U([])}(e)}}),(0,f.jsx)(y.Z,{label:"Users",actions:(0,f.jsx)(b.Z,{})}),(0,f.jsx)(i.Xgh,{children:(0,f.jsxs)(i.rjZ,{container:!0,children:[(0,f.jsxs)(i.rjZ,{item:!0,xs:12,sx:o.OR.actionsTray,children:[(0,f.jsx)(x.Z,{placeholder:"Search Users",onChange:K,value:k,sx:{marginRight:"auto",maxWidth:380}}),(0,f.jsx)(p.s,{resource:d.C3,scopes:[d.Ft.ADMIN_DELETE_USER],matchAll:!0,errorProps:{disabled:!0},children:(0,f.jsx)(g.Z,{tooltip:(0,p.F)("console",[d.Ft.ADMIN_DELETE_USER])?0===_.length?"Select Users to delete":"Delete Selected":(0,d.MK)([d.Ft.ADMIN_DELETE_USER],"delete users"),children:(0,f.jsx)(i.zxk,{id:"delete-selected-users",onClick:()=>{I(!0)},label:"Delete Selected",icon:(0,f.jsx)(i.pJl,{}),disabled:0===_.length,variant:"secondary","aria-label":"delete-selected-users"})})}),(0,f.jsx)(p.s,{scopes:[d.Ft.ADMIN_ADD_USER_TO_GROUP],resource:d.C3,errorProps:{disabled:!0},children:(0,f.jsx)(g.Z,{tooltip:(0,p.F)("console",[d.Ft.ADMIN_ADD_USER_TO_GROUP])?0===_.length?"Select Users to group":"Add to Group":(0,d.MK)([d.Ft.ADMIN_ADD_USER_TO_GROUP],"add users to groups"),children:(0,f.jsx)(i.zxk,{id:"add-to-group",label:"Add to Group",icon:(0,f.jsx)(i.wws,{}),disabled:_.length<=0,onClick:()=>{_.length>0&&E(!0)},variant:"regular"})})}),(0,f.jsx)(p.s,{scopes:[d.Ft.ADMIN_CREATE_USER,d.Ft.ADMIN_LIST_USER_POLICIES,d.Ft.ADMIN_LIST_GROUPS],resource:d.HQ,matchAll:!0,errorProps:{disabled:!0},children:(0,f.jsx)(g.Z,{tooltip:(0,p.F)("console",[d.Ft.ADMIN_CREATE_USER,d.Ft.ADMIN_LIST_USER_POLICIES,d.Ft.ADMIN_LIST_GROUPS,d.Ft.ADMIN_ATTACH_USER_OR_GROUP_POLICY],!0)?"Create User":(0,d.MK)([d.Ft.ADMIN_CREATE_USER,d.Ft.ADMIN_LIST_USER_POLICIES,d.Ft.ADMIN_LIST_GROUPS,d.Ft.ADMIN_ATTACH_USER_OR_GROUP_POLICY],"create users"),children:(0,f.jsx)(i.zxk,{id:"create-user",label:"Create User",icon:(0,f.jsx)(i.dtP,{}),onClick:()=>{s("".concat(d.gA.USER_ADD))},variant:"callAction",disabled:!(0,p.F)("console",[d.Ft.ADMIN_CREATE_USER,d.Ft.ADMIN_LIST_USER_POLICIES,d.Ft.ADMIN_LIST_GROUPS,d.Ft.ADMIN_ATTACH_USER_OR_GROUP_POLICY],!0)})})})]}),h&&(0,f.jsx)(i.kod,{}),!h&&(0,f.jsxs)(n.Fragment,{children:[t.length>0&&(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(i.rjZ,{item:!0,xs:12,sx:{marginBottom:15},children:(0,f.jsx)(p.s,{scopes:[d.Ft.ADMIN_LIST_USERS],resource:d.C3,errorProps:{disabled:!0},children:(0,f.jsx)(i.wQF,{itemActions:M,columns:[{label:"Access Key",elementKey:"accessKey"}],onSelect:L||T?e=>{const{target:{value:s="",checked:t=!1}={}}=e;let n=[..._];return t?n.push(s):n=n.filter((e=>e!==s)),U(n),n}:void 0,selectedItems:_,isLoading:h,records:P,entityName:"Users",idField:"accessKey"})})}),(0,f.jsx)(i.KfX,{title:"Users",iconComponent:(0,f.jsx)(i.oyc,{}),help:(0,f.jsxs)(n.Fragment,{children:["A MinIO user consists of a unique access key (username) and corresponding secret key (password). Clients must authenticate their identity by specifying both a valid access key (username) and the corresponding secret key (password) of an existing MinIO user.",(0,f.jsx)("br",{}),"Groups provide a simplified method for managing shared permissions among users with common access patterns and workloads.",(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),"Users inherit access permissions to data and resources through the groups they belong to.",(0,f.jsx)("br",{}),"MinIO uses Policy-Based Access Control (PBAC) to define the authorized actions and resources to which an authenticated user has access. Each policy describes one or more actions and conditions that outline the permissions of a user or group of users.",(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),"Each user can access only those resources and operations which are explicitly granted by the built-in role. MinIO denies access to any other resource or action by default.",(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),"You can learn more at our"," ",(0,f.jsx)("a",{href:"https://min.io/docs/minio/kubernetes/upstream/administration/identity-access-management/minio-user-management.html?ref=con",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})]}),0===t.length&&(0,f.jsx)(i.rjZ,{container:!0,children:(0,f.jsx)(i.rjZ,{item:!0,xs:8,children:(0,f.jsx)(i.KfX,{title:"Users",iconComponent:(0,f.jsx)(i.oyc,{}),help:(0,f.jsxs)(n.Fragment,{children:["A MinIO user consists of a unique access key (username) and corresponding secret key (password). Clients must authenticate their identity by specifying both a valid access key (username) and the corresponding secret key (password) of an existing MinIO user.",(0,f.jsx)("br",{}),"Groups provide a simplified method for managing shared permissions among users with common access patterns and workloads.",(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),"Users inherit access permissions to data and resources through the groups they belong to.",(0,f.jsx)("br",{}),"MinIO uses Policy-Based Access Control (PBAC) to define the authorized actions and resources to which an authenticated user has access. Each policy describes one or more actions and conditions that outline the permissions of a user or group of users.",(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),"Each user can access only those resources and operations which are explicitly granted by the built-in role. MinIO denies access to any other resource or action by default.",(0,f.jsxs)(p.s,{scopes:[d.Ft.ADMIN_CREATE_USER,d.Ft.ADMIN_LIST_USER_POLICIES,d.Ft.ADMIN_LIST_GROUPS],matchAll:!0,resource:d.C3,children:[(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),"To get started,"," ",(0,f.jsx)(i.vmT,{onClick:()=>{s("".concat(d.gA.USER_ADD))},children:"Create a User"}),"."]})]})})})})]})]})})]})};var C=t(83658),I=t(56028);const w=e=>{let{closeModalAndRefresh:s,selectedUser:t,open:r}=e;const a=(0,j.TL)(),[c,d]=(0,n.useState)(!1),[x,h]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[y,b]=(0,n.useState)(!1),[v,S]=(0,n.useState)([]),A=(0,n.useCallback)((()=>{if(!t)return null;u.Z.invoke("GET","/api/v1/user/".concat((0,l.LL)(t))).then((e=>{d(!1),h(e.accessKey),S(e.memberOf||[]),b("enabled"===e.status)})).catch((e=>{d(!1),a((0,m.zb)(e))}))}),[t,a]);(0,n.useEffect)((()=>{null===t?(h(""),g(""),S([])):A()}),[t,A]);const w=""!==x.trim()&&(""!==p.trim()&&null===t||null!==t);return(0,f.jsx)(I.Z,{onClose:()=>{s()},modalOpen:r,title:"Set Groups",titleIcon:(0,f.jsx)(i.ZmA,{}),children:(0,f.jsx)(n.Fragment,{children:(0,f.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),c||(d(!0),null!==t?u.Z.invoke("PUT","/api/v1/user/".concat((0,l.LL)(t)),{status:y?"enabled":"disabled",groups:v}).then((e=>{d(!1),s()})).catch((e=>{d(!1),a((0,m.zb)(e))})):u.Z.invoke("POST","/api/v1/users",{accessKey:x,secretKey:p,groups:v}).then((e=>{d(!1),s()})).catch((e=>{d(!1),a((0,m.zb)(e))})))},children:[(0,f.jsx)(i.ltY,{withBorders:!1,containerPadding:!1,children:(0,f.jsx)(C.Z,{selectedGroups:v,setSelectedGroups:e=>{S(e)}})}),(0,f.jsxs)(i.xuv,{sx:o.ID.modalButtonBar,children:[(0,f.jsx)(i.zxk,{id:"clear-change-user-groups",type:"button",variant:"regular",onClick:()=>{null===t?(h(""),g(""),S([])):S([])},label:"Clear"}),(0,f.jsx)(i.zxk,{id:"save-user-groups",type:"submit",variant:"callAction",disabled:c||!w,label:"Save"})]}),c&&(0,f.jsx)(i.rjZ,{item:!0,xs:12,children:(0,f.jsx)(i.kod,{})})]})})})};var E=t(78687),k=t(74616),K=t(58400);const _=e=>{let{closeModalAndRefresh:s,selectedUser:t,currentPolicies:r,open:a}=e;const c=(0,j.TL)(),[l,d]=(0,n.useState)(!1),[x,h]=(0,n.useState)([]),p=(0,E.v9)((e=>e.createUser.selectedPolicies));return(0,n.useEffect)((()=>{if(a){const e=r.map((e=>e.policy));h(e),c((0,k.ue)(e))}}),[a,t]),(0,f.jsxs)(I.Z,{onClose:()=>{s()},modalOpen:a,title:"Set Policies",titleIcon:(0,f.jsx)(i.v42,{}),children:[(0,f.jsx)(i.ltY,{withBorders:!1,containerPadding:!1,children:(0,f.jsx)(K.Z,{selectedPolicy:p})}),(0,f.jsxs)(i.xuv,{sx:o.ID.modalButtonBar,children:[(0,f.jsx)(i.zxk,{id:"reset-user-policies",type:"button",variant:"regular",color:"primary",onClick:()=>{c((0,k.ue)(x))},label:"Reset"}),(0,f.jsx)(i.zxk,{id:"save-user-policy",type:"button",variant:"callAction",color:"primary",disabled:l,onClick:()=>{let e=t;d(!0),u.Z.invoke("PUT","/api/v1/set-policy",{name:p,entityName:e,entityType:"user"}).then((()=>{d(!1),c((0,k.ue)([])),s()})).catch((e=>{d(!1),c((0,m.zb)(e))}))},label:"Save"})]}),l&&(0,f.jsx)(i.rjZ,{item:!0,xs:12,children:(0,f.jsx)(i.kod,{})})]})};var U=t(23956),F=t(37798),Z=t(18303),L=t(58493),T=t(48546),P=t(25643);const R=e=>{let{user:s,hasPolicy:t}=e;const a=(0,j.TL)(),o=(0,r.s0)(),[x,h]=(0,n.useState)([]),[y,b]=(0,n.useState)(!1),[v,S]=(0,n.useState)(!1),[A,C]=(0,n.useState)(null),[I,w]=(0,n.useState)(!1),[E,k]=(0,n.useState)(null),[K,_]=(0,n.useState)([]),[R,M]=(0,n.useState)(!1),[O,D]=(0,n.useState)(!1);(0,n.useEffect)((()=>{N()}),[]),(0,n.useEffect)((()=>{y&&u.Z.invoke("GET","/api/v1/user/".concat((0,l.LL)(s),"/service-accounts")).then((e=>{b(!1);const s=e.sort(c.LQ);h(s)})).catch((e=>{a((0,m.Ih)(e)),b(!1)}))}),[y,b,h,s,a]);const N=()=>{b(!0)},z=e=>{C(e),D(!0)},B=[{type:"view",onClick:e=>{e&&z(e.accessKey)}},{type:"delete",onClick:e=>{e&&(e=>{C(e),S(!0)})(e.accessKey)}},{type:"edit",onClick:e=>{e&&z(e.accessKey)}}];return(0,n.useEffect)((()=>{a((0,m.Sc)("user_details_accounts"))}),[]),(0,f.jsxs)(n.Fragment,{children:[v&&(0,f.jsx)(U.default,{deleteOpen:v,selectedServiceAccount:A,closeDeleteModalAndRefresh:e=>{(e=>{S(!1),e&&N()})(e)}}),R&&(0,f.jsx)(Z.Z,{deleteOpen:R,selectedSAs:K,closeDeleteModalAndRefresh:e=>{M(!1),e&&(a((0,m.y1)("Access Keys deleted successfully.")),_([]),b(!0))}}),I&&(0,f.jsx)(F.Z,{newServiceAccount:E,open:I,closeModal:()=>{w(!1),k(null)},entity:"Access Key"}),O&&(0,f.jsx)(T.Z,{open:O,selectedAccessKey:A,closeModalAndRefresh:()=>{D(!1),b(!0)}}),(0,f.jsx)(i.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,f.jsxs)(i.xuv,{sx:{display:"flex",justifyContent:"flex-end",gap:10},children:[(0,f.jsx)(g.Z,{tooltip:"Delete Selected",children:(0,f.jsx)(i.zxk,{id:"delete-selected",onClick:()=>{M(!0)},label:"Delete Selected",icon:(0,f.jsx)(i.pJl,{}),disabled:0===K.length,variant:"secondary"})}),(0,f.jsx)(p.s,{scopes:[d.Ft.ADMIN_CREATE_SERVICEACCOUNT,d.Ft.ADMIN_UPDATE_SERVICEACCOUNT,d.Ft.ADMIN_REMOVE_SERVICEACCOUNT,d.Ft.ADMIN_LIST_SERVICEACCOUNTS],resource:d.C3,matchAll:!0,errorProps:{disabled:!0},children:(0,f.jsx)(g.Z,{tooltip:"Create Access Key",children:(0,f.jsx)(i.zxk,{id:"create-service-account",label:"Create Access Key",variant:"callAction",icon:(0,f.jsx)(i.dtP,{}),onClick:()=>{o("/identity/users/new-user-sa/".concat((0,l.LL)(s)))},disabled:!t})})})]}),children:"Access Keys"}),(0,f.jsx)(i.wQF,{itemActions:B,entityName:"Access Keys",columns:P.r,onSelect:e=>(0,L._0)(e,_,K),selectedItems:K,isLoading:y,records:x,idField:"accessKey"})]})};var M=t(31776),O=t(82342);const D=e=>{let{open:s,userName:t,closeModal:r}=e;const a=(0,j.TL)(),[c,l]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[x,h]=(0,n.useState)(!1);return s?(0,f.jsx)(I.Z,{title:"Change User Password",modalOpen:s,onClose:()=>{l(""),u(""),r()},titleIcon:(0,f.jsx)(i.IaT,{}),children:(0,f.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{if(e.preventDefault(),x)return;if(h(!0),c.length<8)return a((0,m.zb)({errorMessage:"Passwords must be at least 8 characters long",detailedError:""})),void h(!1);let s={selectedUser:t,newSecretKey:c};M.h.account.changeUserPassword(s).then((e=>{h(!1),l(""),u(""),a((0,m.y1)("Successfully updated the password for the user ".concat(t,"."))),r()})).catch((async e=>{h(!1),l(""),u("");const s=await e.json();a((0,m.Ih)((0,O.g)(s)))}))})(e)},children:(0,f.jsxs)(i.ltY,{withBorders:!1,containerPadding:!1,children:[(0,f.jsxs)(i.xuv,{sx:{margin:"10px 0 20px"},children:["Change password for: ",(0,f.jsx)("strong",{children:t})]}),(0,f.jsx)(i.Wzg,{id:"new-password",name:"new-password",onChange:e=>{l(e.target.value)},label:"New Password",type:"password",value:c}),(0,f.jsx)(i.Wzg,{id:"re-new-password",name:"re-new-password",onChange:e=>{u(e.target.value)},label:"Type New Password Again",type:"password",value:d}),(0,f.jsx)(i.xuv,{sx:o.ID.modalButtonBar,children:(0,f.jsx)(i.zxk,{id:"save-user-password",type:"submit",variant:"callAction",color:"primary",disabled:x||!(d.length>0&&c===d),label:"Save"})}),x&&(0,f.jsx)(i.xuv,{children:(0,f.jsx)(i.kod,{})})]})})}):null};var N=t(49076);const z=()=>{const e=(0,j.TL)(),s=(0,r.UO)(),t=(0,r.s0)(),[a,o]=(0,n.useState)(!1),[x,h]=(0,n.useState)(!1),[v,S]=(0,n.useState)(!1),[A,C]=(0,n.useState)(!1),[I,E]=(0,n.useState)(!1),[k,K]=(0,n.useState)([]),[U,F]=(0,n.useState)([]),[Z,L]=(0,n.useState)([]),[T,P]=(0,n.useState)(!1),[M,O]=(0,n.useState)(!1),[z,B]=(0,n.useState)(!1),[G,W]=(0,n.useState)("groups"),Y=(0,p.F)(d.C3,d.cI)&&!I,J=(0,p.F)(d.C3,d.kZ)&&I,Q=(0,l.IO)(s.userName||""),V=localStorage.getItem("userLoggedIn")||"",H=(0,p.F)(d.C3,d.W2,!0),X=(0,p.F)(d.C3,d.ck,!0),q=(0,p.F)(d.C3,d.k_),$=(0,n.useCallback)((()=>{if(""===Q)return null;o(!0),u.Z.invoke("GET","/api/v1/user/".concat((0,l.LL)(Q))).then((e=>{C(!1);const s=e.memberOf||[];K(s);const t=s.map((e=>({group:e})));F(t);const n=e.policy.map((e=>({policy:e})));n.sort(c.KE),L(n),E("enabled"===e.status),B(e.hasPolicy),o(!1)})).catch((s=>{C(!1),o(!1),e((0,m.zb)(s))}))}),[Q,e]);(0,n.useEffect)((()=>{e((0,m.Sc)("user_details_groups"))}),[]),(0,n.useEffect)((()=>{$()}),[$]);const ee=[{type:"view",onClick:e=>{t("".concat(d.gA.GROUPS,"/").concat((0,l.LL)(e.group)))},disableButtonFunction:()=>!q}];return(0,f.jsxs)(n.Fragment,{children:[x&&(0,f.jsx)(w,{open:x,selectedUser:Q,closeModalAndRefresh:()=>{h(!1),$()}}),v&&(0,f.jsx)(_,{open:v,selectedUser:Q,currentPolicies:Z,closeModalAndRefresh:()=>{S(!1),$()}}),M&&(0,f.jsx)(N.default,{deleteOpen:M,selectedUsers:[Q],closeDeleteModalAndRefresh:e=>{(e=>{O(!1),e&&$()})(e)}}),T&&(0,f.jsx)(D,{open:T,userName:Q,closeModal:()=>P(!1)}),(0,f.jsx)(y.Z,{label:(0,f.jsx)(n.Fragment,{children:(0,f.jsx)(i.hbI,{label:"Users",onClick:()=>t(d.gA.USERS)})}),actions:(0,f.jsx)(b.Z,{})}),(0,f.jsx)(i.Xgh,{children:(0,f.jsxs)(i.rjZ,{container:!0,children:[(0,f.jsx)(i.rjZ,{item:!0,xs:12,children:(0,f.jsx)(i.UHn,{icon:(0,f.jsx)(i.oyc,{width:40}),title:Q,subTitle:"",actions:(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)("span",{style:{fontSize:".8rem",marginRight:".5rem"},children:"User Status:"}),(0,f.jsx)("span",{style:{fontWeight:"bold",fontSize:".9rem",marginRight:".5rem"},children:I?"Enabled":"Disabled"}),(0,f.jsx)(g.Z,{tooltip:Y||J?"":(0,p.F)(d.C3,d.cI)?(0,d.MK)(d.kZ,"disable users"):(0,p.F)(d.C3,d.kZ)?(0,d.MK)(d.cI,"enable users"):(0,d.MK)(d.xQ,"enable or disable users"),children:(0,f.jsx)(i.rsf,{indicatorLabels:["Enabled","Disabled"],checked:I,value:"group_enabled",id:"group-status",name:"group-status",onChange:()=>{var s;E(!I),s=!I,A||(C(!0),u.Z.invoke("PUT","/api/v1/user/".concat((0,l.LL)(Q)),{status:s?"enabled":"disabled",groups:k}).then((e=>{C(!1)})).catch((s=>{C(!1),e((0,m.zb)(s))})))},switchOnly:!0,disabled:!Y&&!J})}),(0,f.jsx)(g.Z,{tooltip:(0,p.F)(d.C3,d.Yj)?V===Q?"You cannot delete the currently logged in User":"Delete User":(0,d.MK)(d.Yj,"delete user"),children:(0,f.jsx)(i.zxk,{id:"delete-user",onClick:()=>{O(!0)},icon:(0,f.jsx)(i.XHJ,{}),variant:"secondary",disabled:!(0,p.F)(d.C3,d.Yj)||V===Q})}),(0,f.jsx)(g.Z,{tooltip:"Change Password",children:(0,f.jsx)(i.zxk,{id:"change-user-password",onClick:()=>{P(!0)},icon:(0,f.jsx)(i.tvm,{}),variant:"regular",disabled:V===Q})})]}),sx:{marginBottom:15}})}),(0,f.jsx)(i.rjZ,{item:!0,xs:12,children:(0,f.jsx)(i.mQc,{currentTabOrPath:G,onTabClick:W,options:[{tabConfig:{id:"groups",label:"Groups",disabled:!X},content:(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(i.xuv,{onMouseMove:()=>e((0,m.Sc)("user_details_groups")),children:(0,f.jsx)(i.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,f.jsx)(g.Z,{tooltip:X?"Assign groups":(0,d.MK)(d.ck,"add users to groups"),children:(0,f.jsx)(i.zxk,{id:"add-groups",label:"Add to Groups",onClick:()=>{h(!0)},icon:(0,f.jsx)(i.dtP,{}),variant:"callAction",disabled:!X})}),children:"Groups"})}),(0,f.jsx)(i.rjZ,{item:!0,xs:12,onMouseMove:()=>e((0,m.Sc)("user_details_groups")),children:(0,f.jsx)(i.wQF,{itemActions:ee,columns:[{label:"Name",elementKey:"group"}],isLoading:a,records:U,entityName:"Groups",idField:"group"})})]})},{tabConfig:{id:"service_accounts",label:"Service Accounts",disabled:!(0,p.F)(d.C3,d.LE)},content:(0,f.jsx)(R,{user:Q,hasPolicy:z})},{tabConfig:{id:"policies",label:"Policies",disabled:!H},content:(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(i.xuv,{onMouseMove:()=>e((0,m.Sc)("user_details_policies")),children:(0,f.jsx)(i.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,f.jsx)(g.Z,{tooltip:H?"Assign Policies":(0,d.MK)(d.W2,"assign policies"),children:(0,f.jsx)(i.zxk,{id:"assign-policies",label:"Assign Policies",onClick:()=>{S(!0)},icon:(0,f.jsx)(i.v42,{}),variant:"callAction",disabled:!H})}),children:"Policies"})}),(0,f.jsx)(i.xuv,{children:(0,f.jsx)(i.wQF,{itemActions:[{type:"view",onClick:e=>{t("".concat(d.gA.POLICIES,"/").concat((0,l.LL)(e.policy)))}}],columns:[{label:"Name",elementKey:"policy"}],isLoading:a,records:Z,entityName:"Policies",idField:"policy"})})]})}]})})]})})]})};var B=t(58429);const G=e=>{let{icon:s,description:t}=e;return(0,f.jsxs)(i.xuv,{sx:{display:"flex","& .min-icon":{marginRight:"10px",height:"23px",width:"23px",marginBottom:"10px"}},children:[s," ",(0,f.jsx)("div",{style:{fontSize:"14px",fontStyle:"italic",color:"#5E5E5E"},children:t})]})},W=()=>(0,f.jsxs)(i.xuv,{sx:{flex:1,border:"1px solid #eaeaea",borderRadius:"2px",display:"flex",flexFlow:"column",padding:"20px",marginTop:0},children:[(0,f.jsxs)(i.xuv,{sx:{fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center",marginBottom:"16px","& .min-icon":{height:"21px",width:"21px",marginRight:"15px"}},children:[(0,f.jsx)(i.M9A,{}),(0,f.jsx)("div",{children:"Learn more about the Users feature"})]}),(0,f.jsxs)(i.xuv,{sx:{fontSize:"14px",marginBottom:"15px"},children:["A MinIO user consists of a unique access key (username) and corresponding secret key (password). Clients must authenticate their identity by specifying both a valid access key (username) and the corresponding secret key (password) of an existing MinIO user.",(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),"Each user can have one or more assigned policies that explicitly list the actions and resources to which that user has access. Users can also inherit policies from the groups in which they have membership.",(0,f.jsx)("br",{})]}),(0,f.jsxs)(i.xuv,{sx:{display:"flex",flexFlow:"column"},children:[(0,f.jsx)(G,{icon:(0,f.jsx)(i.oyc,{}),description:"Create Users"}),(0,f.jsx)(G,{icon:(0,f.jsx)(i.wws,{}),description:"Manage Groups"}),(0,f.jsx)(G,{icon:(0,f.jsx)(i.QXQ,{}),description:"Assign Policies"})]})]}),Y=()=>{const e=(0,j.TL)(),s=(0,E.v9)((e=>e.createUser.userName));return(0,f.jsx)(i.Wzg,{id:"accesskey-input",name:"accesskey-input",label:"User Name",value:s,autoFocus:!0,onChange:s=>{e((0,k.b4)(s.target.value))}})},J=()=>{const e=(0,j.TL)(),s=(0,E.v9)((e=>e.createUser.secretKey));return(0,f.jsx)(i.Wzg,{id:"standard-multiline-static",name:"standard-multiline-static",type:"password",label:"Password",value:s,onChange:s=>{e((0,k.xz)(s.target.value))},autoComplete:"current-password"})},Q=()=>{const e=(0,j.TL)(),s=(0,E.v9)((e=>e.createUser.selectedPolicies)),t=(0,E.v9)((e=>e.createUser.selectedGroups)),a=(0,E.v9)((e=>e.createUser.addLoading)),c=(0,E.v9)((e=>e.createUser.sendEnabled)),l=(0,E.v9)((e=>e.createUser.secretKeylength)),u=(0,r.s0)();e((0,k.B$)());return(0,n.useEffect)((()=>{e((0,m.Sc)("add_user"))}),[]),(0,f.jsx)(n.Fragment,{children:(0,f.jsxs)(i.rjZ,{item:!0,xs:12,children:[(0,f.jsx)(y.Z,{label:(0,f.jsx)(i.hbI,{label:"Users",onClick:()=>u(d.gA.USERS)}),actions:(0,f.jsx)(b.Z,{})}),(0,f.jsx)(i.Xgh,{children:(0,f.jsx)(i.ltY,{title:"Create User",icon:(0,f.jsx)(i.P3B,{}),helpBox:(0,f.jsx)(W,{}),children:(0,f.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:s=>{(s=>{if(s.preventDefault(),l<8)return e((0,m.Ih)({errorMessage:"Passwords must be at least 8 characters long",detailedError:""})),void e((0,k.NV)(!1));a||(e((0,k.NV)(!0)),e((0,B.h)()).unwrap().then((()=>u("".concat(d.gA.USERS)))))})(s)},children:[(0,f.jsx)(Y,{}),(0,f.jsx)(J,{}),(0,f.jsx)(K.Z,{selectedPolicy:s}),(0,f.jsx)(C.Z,{selectedGroups:t,setSelectedGroups:s=>{e((0,k.wY)(s))}}),a&&(0,f.jsx)(i.rjZ,{item:!0,xs:12,children:(0,f.jsx)(i.kod,{})}),(0,f.jsxs)(i.rjZ,{item:!0,xs:12,sx:o.ID.modalButtonBar,children:[(0,f.jsx)(i.zxk,{id:"clear-add-user",type:"button",variant:"regular",onClick:s=>{e((0,B.S)())},label:"Clear"}),(0,f.jsx)(i.zxk,{id:"save-user",type:"submit",variant:"callAction",color:"primary",disabled:a||!c,label:"Save"})]})]})})})]})})};var V=t(92217);const H=e=>{let{icon:s,description:t}=e;return(0,f.jsxs)(i.xuv,{sx:{display:"flex","& .min-icon":{marginRight:"10px",height:"23px",width:"23px",marginBottom:"10px"}},children:[s," ",(0,f.jsx)("div",{style:{fontSize:"14px",fontStyle:"italic",color:"#5E5E5E"},children:t})]})},X=()=>(0,f.jsxs)(i.xuv,{sx:{flex:1,border:"1px solid #eaeaea",borderRadius:"2px",display:"flex",flexFlow:"column",padding:"20px",marginTop:0},children:[(0,f.jsxs)(i.xuv,{sx:{fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center",marginBottom:"16px",paddingBottom:"20px","& .min-icon":{height:"21px",width:"21px",marginRight:"15px"}},children:[(0,f.jsx)(i.M9A,{}),(0,f.jsx)("div",{children:"Learn more about Access Keys"})]}),(0,f.jsxs)(i.xuv,{sx:{fontSize:"14px",marginBottom:"15px"},children:[(0,f.jsxs)(i.xuv,{sx:{paddingBottom:"20px"},children:[(0,f.jsx)(H,{icon:(0,f.jsx)(i.nO6,{}),description:"Create Access Keys"}),(0,f.jsx)(i.xuv,{sx:{paddingTop:"20px"},children:"Access Keys inherit the policies explicitly attached to the parent user, and the policies attached to each group in which the parent user has membership."})]}),(0,f.jsxs)(i.xuv,{sx:{paddingBottom:"20px"},children:[(0,f.jsx)(H,{icon:(0,f.jsx)(i.tvm,{}),description:"Assign Custom Credentials"}),(0,f.jsx)(i.xuv,{sx:{paddingTop:"10px"},children:"Randomized access credentials are recommended, and provided by default. You may use your own custom Access Key and Secret Key by replacing the default values. After creation of any Access Key, you will be given the opportunity to view and download the account credentials."}),(0,f.jsx)(i.xuv,{sx:{paddingTop:"10px"},children:"Access Keys support programmatic access by applications. You cannot use a Access Key to log into the MinIO Console."})]}),(0,f.jsxs)(i.xuv,{sx:{paddingBottom:"20px"},children:[(0,f.jsx)(H,{icon:(0,f.jsx)(i.v42,{}),description:"Assign Access Policies"}),(0,f.jsx)(i.xuv,{sx:{paddingTop:"10px"},children:"You can specify an optional JSON-formatted IAM policy to further restrict Access Key access to a subset of the actions and resources explicitly allowed for the parent user. Additional access beyond that of the parent user cannot be implemented through these policies."}),(0,f.jsx)(i.xuv,{sx:{paddingTop:"10px"},children:"You cannot modify the optional Access Key IAM policy after saving."})]})]}),(0,f.jsx)(i.xuv,{sx:{display:"flex",flexFlow:"column"}})]});var q=t(60680);const $=()=>{const e=(0,j.TL)(),s=(0,r.UO)(),t=(0,r.s0)(),[a,c]=(0,n.useState)(!1),[x,h]=(0,n.useState)((0,l.zO)(20)),[p,g]=(0,n.useState)((0,l.zO)(40)),[v,S]=(0,n.useState)(!1),[A,C]=(0,n.useState)(null),[I,w]=(0,n.useState)(""),E=(0,l.IO)(s.userName||""),[k,K]=(0,n.useState)(""),[_,U]=(0,n.useState)(""),[Z,L]=(0,n.useState)(""),[T,P]=(0,n.useState)();(0,n.useEffect)((()=>{if(a){const s=T?T.toJSDate().toISOString():null;u.Z.invoke("POST","/api/v1/user/".concat((0,l.LL)(E),"/service-account-credentials"),{policy:I,accessKey:x,secretKey:p,description:_,comment:Z,name:k,expiry:s}).then((e=>{c(!1),C({accessKey:e.accessKey||"",secretKey:e.secretKey||"",url:e.url||""})})).catch((s=>{c(!1),e((0,m.Ih)(s))}))}}),[a,c,e,I,E,x,p,k,_,T,Z]),(0,n.useEffect)((()=>{v&&u.Z.invoke("GET","/api/v1/user/".concat((0,l.LL)(E),"/policies")).then((e=>{w(JSON.stringify(JSON.parse(e.policy),null,4))})).catch((e=>{(0,m.Ih)(e)}))}),[v,E]);return(0,n.useEffect)((()=>{e((0,m.Sc)("add_user_SA"))}),[]),(0,f.jsxs)(n.Fragment,{children:[A&&(0,f.jsx)(F.Z,{newServiceAccount:A,open:!0,closeModal:()=>{C(null),t("".concat(d.gA.USERS,"/").concat((0,l.LL)(E)))},entity:"Access Key"}),(0,f.jsxs)(i.rjZ,{item:!0,xs:12,children:[(0,f.jsx)(y.Z,{label:(0,f.jsx)(i.hbI,{onClick:()=>t("".concat(d.gA.USERS,"/").concat((0,l.LL)(E))),label:"User Details - "+E}),actions:(0,f.jsx)(b.Z,{})}),(0,f.jsx)(i.Xgh,{children:(0,f.jsx)(i.ltY,{helpBox:(0,f.jsx)(X,{}),icon:(0,f.jsx)(i.tVY,{}),title:"Create Access Key for ".concat(E),children:(0,f.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),(e=>{e.preventDefault(),c(!0)})(e)},children:[(0,f.jsx)(i.Wzg,{value:x,label:"Access Key",id:"accessKey",name:"accessKey",placeholder:"Enter Access Key",onChange:e=>{h(e.target.value)},startIcon:(0,f.jsx)(i.nO6,{})}),(0,f.jsx)(i.Wzg,{value:p,label:"Secret Key",id:"secretKey",name:"secretKey",type:"password",placeholder:"Enter Secret Key",onChange:e=>{g(e.target.value)},startIcon:(0,f.jsx)(i.tvm,{})}),(0,f.jsx)(i.rsf,{value:"serviceAccountPolicy",id:"serviceAccountPolicy",name:"serviceAccountPolicy",checked:v,onChange:e=>{S(e.target.checked)},label:"Restrict beyond user policy",description:"You can specify an optional JSON-formatted IAM policy to further restrict Access Key access to a subset of the actions and resources explicitly allowed for the parent user. Additional access beyond that of the parent user cannot be implemented through these policies."}),v&&(0,f.jsxs)(i.rjZ,{item:!0,xs:12,children:[(0,f.jsx)(i.xuv,{children:(0,f.jsx)(i.SYi,{content:(0,f.jsx)(n.Fragment,{children:(0,f.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/identity-access-management/policy-based-access-control.html#policy-document-structure",children:"Guide to access policy structure"})}),placement:"right",children:(0,f.jsx)(q.Z,{children:"Current User Policy - edit the JSON to remove permissions for this Access Key"})})}),(0,f.jsx)(i.rjZ,{item:!0,xs:12,sx:{...o.ID.formScrollable},children:(0,f.jsx)(V.Z,{value:I,onChange:e=>{w(e)},editorHeight:"350px",helptip:(0,f.jsx)(n.Fragment,{children:(0,f.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/identity-access-management/policy-based-access-control.html#policy-document-structure",children:"Guide to access policy structure"})})})})]}),(0,f.jsx)(i.xuv,{sx:{marginBottom:"15px",marginTop:"15px",width:"100%","& label":{width:"180px"}},children:(0,f.jsx)(i.YgR,{noLabelMinWidth:!0,value:T,onChange:e=>{P(e)},id:"expiryTime",label:"Expiry",timeFormat:"24h",secondsSelector:!1})}),(0,f.jsx)(i.Wzg,{value:k,label:"Name",id:"name",name:"name",type:"text",placeholder:"Enter a name",onChange:e=>{K(e.target.value)}}),(0,f.jsx)(i.Wzg,{value:_,label:"Description",id:"description",name:"description",type:"text",placeholder:"Enter a description",onChange:e=>{U(e.target.value)}}),(0,f.jsx)(i.Wzg,{value:Z,label:"Comments",id:"comment",name:"comment",type:"text",placeholder:"Enter a comment",onChange:e=>{L(e.target.value)}}),(0,f.jsxs)(i.rjZ,{item:!0,xs:12,sx:{...o.ID.modalButtonBar},children:[(0,f.jsx)(i.zxk,{id:"clear",type:"button",variant:"regular",onClick:()=>{C(null),h(""),g("")},label:"Clear"}),(0,f.jsx)(i.zxk,{id:"create-sa",type:"submit",variant:"callAction",color:"primary",label:"Create"})]})]})})})]})]})},ee=()=>(0,f.jsxs)(r.Z5,{children:[(0,f.jsx)(r.AW,{path:"add-user",element:(0,f.jsx)(Q,{})}),(0,f.jsx)(r.AW,{path:":userName",element:(0,f.jsx)(z,{})}),(0,f.jsx)(r.AW,{path:"new-user-sa/:userName",element:(0,f.jsx)($,{})}),(0,f.jsx)(r.AW,{path:"/",element:(0,f.jsx)(A,{})}),(0,f.jsx)(r.AW,{element:(0,f.jsx)(a.Z,{})})]})}}]);
//# sourceMappingURL=4563.8e5d0b76.chunk.js.map