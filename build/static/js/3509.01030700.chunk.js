"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[3509],{83509:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(72791),l=a(29945),s=a(56028),i=a(17420),r=a(23814),c=a(87995),o=a(44690),d=a(31776),u=a(82342),p=a(80184);const h=e=>{let{closeModalAndRefresh:t,open:a,bucketName:h,ruleID:g}=e;const x=(0,o.TL)(),[f,m]=(0,n.useState)(!0),[j,b]=(0,n.useState)(!1),[v,S]=(0,n.useState)("1"),[k,y]=(0,n.useState)(""),[C,D]=(0,n.useState)(""),[E,I]=(0,n.useState)(!1),[R,w]=(0,n.useState)(!1),[B,z]=(0,n.useState)(""),[M,N]=(0,n.useState)(""),[A,P]=(0,n.useState)(""),[_,Z]=(0,n.useState)(!1),[O,T]=(0,n.useState)(!1),[W,q]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{f&&d.h.buckets.getBucketReplicationRule(h,g).then((e=>{var t;S(e.data.priority?e.data.priority.toString():"");const a=e.data.prefix||"",n=e.data.tags||"";D(a),z(n),N(n),y((null===(t=e.data.destination)||void 0===t?void 0:t.bucket)||""),I(e.data.delete_marker_replication||!1),P(e.data.storageClass||""),Z(!!e.data.existingObjects),T(!!e.data.deletes_replication),q("Enabled"===e.data.status),w(!!e.data.metadata_replication),m(!1)})).catch((e=>{x((0,c.zb)((0,u.g)(e.error))),m(!1)}))}),[f,x,h,g]),(0,n.useEffect)((()=>{if(j){const e={arn:k,ruleState:W,prefix:C,tags:M,replicateDeleteMarkers:E,replicateDeletes:O,replicateExistingObjects:_,replicateMetadata:R,priority:parseInt(v),storageClass:A};d.h.buckets.updateMultiBucketReplication(h,g,e).then((()=>{b(!1),t(!0)})).catch((e=>{x((0,c.zb)((0,u.g)(e.error))),b(!1)}))}}),[j,h,g,k,C,M,E,v,O,_,W,R,A,t,x]),(0,p.jsx)(s.Z,{modalOpen:a,onClose:()=>{t(!1)},title:"Edit Bucket Replication",titleIcon:(0,p.jsx)(l.xRg,{}),children:(0,p.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),b(!0)},children:(0,p.jsxs)(l.ltY,{containerPadding:!1,withBorders:!1,children:[(0,p.jsx)(l.rsf,{checked:W,id:"ruleState",name:"ruleState",label:"Rule State",onChange:e=>{q(e.target.checked)}}),(0,p.jsx)(l.bSr,{label:"Destination",sx:{width:"100%"},children:k}),(0,p.jsx)(l.Wzg,{id:"priority",name:"priority",onChange:e=>{e.target.validity.valid&&S(e.target.value)},label:"Priority",value:v,pattern:"[0-9]*"}),(0,p.jsx)(l.Wzg,{id:"storageClass",name:"storageClass",onChange:e=>{P(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:A}),(0,p.jsxs)("fieldset",{className:"inputItem",children:[(0,p.jsx)("legend",{children:"Object Filters"}),(0,p.jsx)(l.Wzg,{id:"prefix",name:"prefix",onChange:e=>{D(e.target.value)},placeholder:"prefix",label:"Prefix",value:C}),(0,p.jsx)(i.Z,{name:"tags",label:"Tags",elements:B,onChange:e=>{N(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})]}),(0,p.jsxs)("fieldset",{className:"inputItem",children:[(0,p.jsx)("legend",{children:"Replication Options"}),(0,p.jsx)(l.rsf,{checked:_,id:"repExisting",name:"repExisting",label:"Existing Objects",onChange:e=>{Z(e.target.checked)},description:"Replicate existing objects"}),(0,p.jsx)(l.rsf,{checked:R,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:e=>{w(e.target.checked)},description:"Metadata Sync"}),(0,p.jsx)(l.rsf,{checked:E,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:e=>{I(e.target.checked)},description:"Replicate soft deletes"}),(0,p.jsx)(l.rsf,{checked:O,id:"repDelete",name:"repDelete",label:"Deletes",onChange:e=>{T(e.target.checked)},description:"Replicate versioned deletes"})]}),(0,p.jsxs)(l.rjZ,{item:!0,xs:12,sx:r.ID.modalButtonBar,children:[(0,p.jsx)(l.zxk,{id:"cancel-edit-replication",type:"button",variant:"regular",disabled:f||j,onClick:()=>{t(!1)},label:"Cancel"}),(0,p.jsx)(l.zxk,{id:"save-replication",type:"submit",variant:"callAction",disabled:f||j,label:"Save"})]})]})})})}},17420:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(72791),l=a(26181),s=a.n(l),i=a(48573),r=a.n(i),c=a(29945),o=a(80184);const d=e=>{let{elements:t,name:a,label:l,tooltip:i="",keyPlaceholder:d="",valuePlaceholder:u="",onChange:p,withBorder:h=!1}=e;const[g,x]=(0,n.useState)([""]),[f,m]=(0,n.useState)([""]),j=(0,n.createRef)();(0,n.useEffect)((()=>{if(1===g.length&&""===g[0]&&1===f.length&&""===f[0]&&t&&""!==t){const e=t.split("&");let a=[],n=[];e.forEach((e=>{const t=e.split("=");2===t.length&&(a.push(t[0]),n.push(t[1]))})),a.push(""),n.push(""),x(a),m(n)}}),[g,f,t]),(0,n.useEffect)((()=>{const e=j.current;e&&g.length>1&&e.scrollIntoView(!1)}),[g]);const b=(0,n.useRef)(!0);(0,n.useLayoutEffect)((()=>{b.current?b.current=!1:k()}),[g,f]);const v=e=>{e.persist();let t=[...g];const a=s()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,x(t)},S=e=>{e.persist();let t=[...f];const a=s()(e.target,"dataset.index","0");t[parseInt(a)]=e.target.value,m(t)},k=r()((()=>{let e="";g.forEach(((t,a)=>{if(g[a]&&f[a]){let n="".concat(t,"=").concat(f[a]);0!==a&&(n="&".concat(n)),e="".concat(e).concat(n)}})),p(e)}),500),y=f.map(((e,t)=>(0,o.jsxs)(c.rjZ,{item:!0,xs:12,className:"lineInputBoxes inputItem",children:[(0,o.jsx)(c.Wzg,{id:"".concat(a,"-key-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:g[t],onChange:v,index:t,placeholder:d}),(0,o.jsx)("span",{className:"queryDiv",children:":"}),(0,o.jsx)(c.Wzg,{id:"".concat(a,"-value-").concat(t.toString()),label:"",name:"".concat(a,"-").concat(t.toString()),value:f[t],onChange:S,index:t,placeholder:u,overlayIcon:t===f.length-1?(0,o.jsx)(c.dtP,{}):null,overlayAction:()=>{(()=>{if(""!==g[g.length-1].trim()&&""!==f[f.length-1].trim()){const e=[...g],t=[...f];e.push(""),t.push(""),x(e),m(t)}})()}})]},"query-pair-".concat(a,"-").concat(t.toString()))));return(0,o.jsx)(n.Fragment,{children:(0,o.jsxs)(c.rjZ,{item:!0,xs:12,sx:{"& .lineInputBoxes":{display:"flex"},"& .queryDiv":{alignSelf:"center",margin:"-15px 4px 0",fontWeight:600}},className:"inputItem",children:[(0,o.jsxs)(c.AZs,{children:[l,""!==i&&(0,o.jsx)(c.xuv,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,o.jsx)(c.ua7,{tooltip:i,placement:"top",children:(0,o.jsx)(c.byK,{style:{width:13,height:13}})})})]}),(0,o.jsxs)(c.xuv,{withBorders:h,sx:{padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},children:[y,(0,o.jsx)("div",{ref:j})]})]})})}}}]);
//# sourceMappingURL=3509.01030700.chunk.js.map