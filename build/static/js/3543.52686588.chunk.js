"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[3543],{63856:(e,t,n)=>{n.d(t,{Z:()=>o});var s=n(72791),a=n(29945),i=n(80184);const o=e=>{let{timeStart:t,setTimeStart:n,timeEnd:o,setTimeEnd:l,triggerSync:r,label:c="Filter:",startLabel:d="Start Time:",endLabel:u="End Time:"}=e;return(0,i.jsx)(a.rjZ,{item:!0,xs:12,sx:{"& .filter-date-input-label, .end-time-input-label":{display:"none"},"& .MuiInputBase-adornedEnd.filter-date-date-time-input":{width:"100%",border:"1px solid #eaeaea",paddingLeft:"8px",paddingRight:"8px",borderRadius:"1px"},"& .MuiInputAdornment-root button":{height:"20px",width:"20px",marginRight:"5px"},"& .filter-date-input-wrapper":{height:"30px",width:"100%","& .MuiTextField-root":{height:"30px",width:"90%","& input.Mui-disabled":{color:"#000000",WebkitTextFillColor:"#101010"}}}},children:(0,i.jsxs)(a.xuv,{sx:{display:"grid",height:40,alignItems:"center",gridTemplateColumns:"auto 2fr auto",padding:0,["@media (max-width: ".concat(a.Egj.sm,"px)")]:{padding:5},["@media (max-width: ".concat(a.Egj.md,"px)")]:{gridTemplateColumns:"1fr",height:"auto"},gap:"5px"},children:[(0,i.jsx)(a.xuv,{sx:{fontSize:"14px",fontWeight:500,marginRight:"5px"},className:"muted",children:c}),(0,i.jsxs)(a.xuv,{customBorderPadding:"0px",sx:{display:"grid",height:40,alignItems:"center",gridTemplateColumns:"1fr 1fr",gap:"8px",paddingLeft:"8px",paddingRight:"8px",["@media (max-width: ".concat(a.Egj.md,"px)")]:{height:"auto",gridTemplateColumns:"1fr"}},children:[(0,i.jsx)(a.YgR,{value:t,onChange:n,id:"stTime",secondsSelector:!1,pickerStartComponent:(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)(a.wZd,{}),(0,i.jsx)("span",{children:d})]})}),(0,i.jsx)(a.YgR,{value:o,onChange:l,id:"endTime",secondsSelector:!1,pickerStartComponent:(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)(a.wZd,{}),(0,i.jsx)("span",{children:u})]})})]}),r&&(0,i.jsx)(a.xuv,{sx:{alignItems:"flex-end",display:"flex",justifyContent:"flex-end"},children:(0,i.jsx)(a.zxk,{id:"sync",type:"button",variant:"callAction",onClick:r,icon:(0,i.jsx)(a.bnu,{}),label:"Sync"})})]})})}},33543:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var s=n(72791),a=n(26181),i=n.n(a),o=n(78687),l=n(29945),r=n(45248);const c={time:"Timestamp",api_name:"API Name",access_key:"Access Key",bucket:"Bucket",object:"Object",remote_host:"Remote Host",request_id:"Request ID",user_agent:"User Agent",response_status:"Response Status",response_status_code:"Response Status Code",request_content_length:"Request Content Length",response_content_length:"Response Content Length",time_to_response_ns:"Time to Response NS"};var d=n(56087),u=n(87995),m=n(46078),x=n(44690),p=n(38442),h=n(81207),g=n(80184);const j=e=>{let{label:t,onChange:n,value:a,placeholder:i="",id:o,name:r}=e;return(0,g.jsx)(s.Fragment,{children:(0,g.jsxs)(l.xuv,{sx:{flexGrow:1,margin:"0 15px"},children:[(0,g.jsx)(l.AZs,{children:t}),(0,g.jsx)(l.Wzg,{placeholder:i,id:o,name:r,label:"",onChange:e=>{n(e.target.value)},sx:{"& input":{height:30}},value:a})]})})};var b=n(56028);const _=e=>{let{modalOpen:t,logSearchElement:n,onClose:a}=e;const o=Object.keys(n);return(0,g.jsx)(s.Fragment,{children:(0,g.jsx)(b.Z,{modalOpen:t,title:"Full Log Information",onClose:()=>{a()},children:(0,g.jsxs)(l.rjZ,{container:!0,children:[(0,g.jsx)(l.rjZ,{item:!0,xs:12,children:(0,g.jsx)("table",{children:(0,g.jsx)("tbody",{children:o.map(((e,t)=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{style:{fontWeight:700,paddingRight:"10px",textAlign:"left"},children:i()(c,e,"".concat(e))}),(0,g.jsx)("td",{children:i()(n,e,"")})]},"logSearch-".concat(t.toString()))))})})}),(0,g.jsx)(l.rjZ,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,g.jsx)(l.zxk,{id:"close-log-search",variant:"callAction",color:"primary",onClick:a,label:"Close"})})]})})})};var f=n(63856);const C=e=>{let{iconComponent:t,entity:n,documentationLink:a}=e;return(0,g.jsx)(l.rjZ,{container:!0,sx:{justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,g.jsx)(l.rjZ,{item:!0,xs:8,children:(0,g.jsx)(l.KfX,{title:"".concat(n," not available"),iconComponent:t,help:(0,g.jsxs)(s.Fragment,{children:["This feature is not available.",(0,g.jsx)("br",{}),"Please configure"," ",(0,g.jsx)("a",{href:a,target:"_blank",rel:"noopener",children:n})," ","first to use this feature."]})})})})};var S=n(79844),y=n(61342);const v={display:"flex",justifyContent:"space-between",marginBottom:12},k=()=>{const e=(0,x.TL)(),t=(0,o.v9)(m.$4),[n,a]=(0,s.useState)(!0),[b,k]=(0,s.useState)(null),[w,T]=(0,s.useState)(null),[E,F]=(0,s.useState)(!1),[I,A]=(0,s.useState)([]),[Z,R]=(0,s.useState)(""),[q,L]=(0,s.useState)(""),[K,B]=(0,s.useState)(""),[O,D]=(0,s.useState)(""),[M,N]=(0,s.useState)(""),[z,P]=(0,s.useState)(""),[W,H]=(0,s.useState)(""),[Y,U]=(0,s.useState)("DESC"),[G,X]=(0,s.useState)(["time","api_name","access_key","bucket","object","remote_host","request_id","user_agent","response_status"]),[Q,$]=(0,s.useState)(0),[J,V]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(!1),[ne,se]=(0,s.useState)(null);let ae=null;const ie=t&&t.includes("log-search"),oe=(0,s.useCallback)((()=>{if(!J&&ie){V(!0);let t="".concat(""!==Z?"&fp=bucket:".concat(Z):"").concat(""!==M?"&fp=object:".concat(M):"").concat(""!==q?"&fp=api_name:".concat(q):"").concat(""!==K?"&fp=access_key:".concat(K):"").concat(""!==z?"&fp=request_id:".concat(z):"").concat(""!==O?"&fp=user_agent:".concat(O):"").concat(""!==W?"&fp=response_status:".concat(W):"");t=t.trim(),t.endsWith(",")&&(t=t.slice(0,-1)),h.Z.invoke("GET","/api/v1/logs/search?q=reqinfo".concat(""!==t?"".concat(t):"","&pageSize=100&pageNo=").concat(Q,"&order=").concat("DESC"===Y?"timeDesc":"timeAsc").concat(null!==b?"&timeStart=".concat(b.toUTC().toISO()):"").concat(null!==w?"&timeEnd=".concat(w.toUTC().toISO()):"")).then((e=>{const t=e.results||[];a(!1),V(!1),A(t),$(Q+1),null!==ae&&ae()})).catch((t=>{a(!1),V(!1),e((0,u.Ih)(t))}))}else a(!1),V(!1)}),[J,ie,Z,M,q,K,z,O,W,Q,Y,b,w,ae,e]);(0,s.useEffect)((()=>{n&&(A([]),oe())}),[n,Y,oe]);return(0,s.useEffect)((()=>{e((0,u.Sc)("audit_logs"))}),[]),(0,g.jsxs)(s.Fragment,{children:[ee&&null!==ne&&(0,g.jsx)(_,{logSearchElement:ne,modalOpen:ee,onClose:()=>{se(null),te(!1)}}),(0,g.jsx)(S.Z,{label:"Audit Logs",actions:(0,g.jsx)(y.Z,{})}),(0,g.jsx)(l.Xgh,{children:ie?(0,g.jsxs)(s.Fragment,{children:[" ",(0,g.jsxs)(l.xuv,{withBorders:!0,sx:{marginBottom:15},children:[(0,g.jsxs)(l.rjZ,{item:!0,xs:12,sx:{display:"flex",padding:15,["@media (max-width: ".concat(l.Egj.lg,"px)")]:{flexFlow:"column"}},children:[(0,g.jsx)(l.xuv,{children:(0,g.jsx)(f.Z,{setTimeEnd:e=>T(e),setTimeStart:e=>k(e),timeEnd:w,timeStart:b})}),(0,g.jsx)(l.xuv,{sx:{display:"flex",alignItems:"center"},children:(0,g.jsx)(l.cvr,{label:"".concat(E?"Hide":"Show"," advanced Filters"),open:E,onClick:()=>{F(!E)}})})]}),(0,g.jsxs)(l.rjZ,{item:!0,xs:12,sx:{display:E?"block":"none",overflowY:"hidden",marginBottom:E?12:0},children:[(0,g.jsxs)(l.xuv,{sx:{marginLeft:15,marginBottom:15,fontSize:12,color:"#9C9C9C"},children:["Enable your preferred options to get filtered records.",(0,g.jsx)("br",{}),"You can use '*' to match any character, '.' to signify a single character or '\\' to scape an special character (E.g. mybucket-*)"]}),(0,g.jsxs)(l.xuv,{sx:v,children:[(0,g.jsx)(j,{onChange:R,value:Z,label:"Bucket",id:"bucket",name:"bucket"}),(0,g.jsx)(j,{onChange:L,value:q,label:"API Name",id:"api_name",name:"api_name"}),(0,g.jsx)(j,{onChange:B,value:K,label:"Access Key",id:"access_key",name:"access_key"}),(0,g.jsx)(j,{onChange:D,value:O,label:"User Agent",id:"user_agent",name:"user_agent"})]}),(0,g.jsxs)(l.xuv,{sx:v,children:[(0,g.jsx)(j,{onChange:N,value:M,label:"Object",id:"object",name:"object"}),(0,g.jsx)(j,{onChange:P,value:z,label:"Request ID",id:"request_id",name:"request_id"}),(0,g.jsx)(j,{onChange:H,value:W,label:"Response Status",id:"response_status",name:"response_status"})]})]}),(0,g.jsx)(l.rjZ,{item:!0,xs:12,sx:{marginBottom:15,padding:"0 15px 0 15px",display:"flex",alignItems:"center",justifyContent:"flex-end"},children:(0,g.jsx)(l.zxk,{id:"get-information",type:"button",variant:"callAction",onClick:()=>{$(0),a(!0)},label:"Get Information"})})]}),(0,g.jsx)(l.rjZ,{item:!0,xs:12,children:(0,g.jsx)(p.s,{scopes:[d.Ft.ADMIN_HEALTH_INFO],resource:d.C3,errorProps:{disabled:!0},children:(0,g.jsx)(l.wQF,{columns:[{label:c.time,elementKey:"time",enableSort:!0},{label:c.api_name,elementKey:"api_name"},{label:c.access_key,elementKey:"access_key"},{label:c.bucket,elementKey:"bucket"},{label:c.object,elementKey:"object"},{label:c.remote_host,elementKey:"remote_host"},{label:c.request_id,elementKey:"request_id"},{label:c.user_agent,elementKey:"user_agent"},{label:c.response_status,elementKey:"response_status",renderFunction:e=>(0,g.jsx)(s.Fragment,{children:(0,g.jsxs)("span",{children:[e.response_status_code," (",e.response_status,")"]})}),renderFullObject:!0},{label:c.request_content_length,elementKey:"request_content_length",renderFunction:r.ae},{label:c.response_content_length,elementKey:"response_content_length",renderFunction:r.ae},{label:c.time_to_response_ns,elementKey:"time_to_response_ns",renderFunction:r.Yj,contentTextAlign:"right"}],isLoading:n,records:I,entityName:"Logs",customEmptyMessage:"There is no information with this criteria",idField:"request_id",columnsSelector:!0,columnsShown:G,onColumnChange:e=>{let t;t=G.findIndex((t=>t===e))>=0?G.filter((t=>t!==e)):[...G,e],X(t)},customPaperHeight:E?"calc(100vh - 520px)":"calc(100vh - 320px)",sortConfig:{currentSort:"time",currentDirection:Y,triggerSort:e=>{const t=i()(e,"sortDirection","DESC");U(t),$(0),a(!0)}},infiniteScrollConfig:{recordsCount:1e6,loadMoreRecords:e=>(oe(),new Promise((e=>{ae=e})))},itemActions:[{type:"view",onClick:e=>{se(e),te(!0)}}],textSelectable:!0})})})]}):(0,g.jsx)(C,{entity:"Audit Logs",iconComponent:(0,g.jsx)(l.W1M,{}),documentationLink:"https://min.io/docs/minio/windows/operations/monitoring/minio-logging.html?ref=con"})})]})}}}]);
//# sourceMappingURL=3543.52686588.chunk.js.map