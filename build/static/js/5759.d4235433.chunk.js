"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[5759],{85759:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var i=n(72791),l=n(78687),s=n(57689),c=n(29945),r=n(81207),a=n(38442),o=n(56087),d=n(87995),u=n(9859),h=n(44690),p=n(27454),b=n(75578),m=n(80184);const x=(0,b.Z)(i.lazy((()=>n.e(3509).then(n.bind(n,83509))))),j=(0,b.Z)(i.lazy((()=>n.e(889).then(n.bind(n,20889))))),S=(0,b.Z)(i.lazy((()=>n.e(9088).then(n.bind(n,69088))))),k=()=>{const e=(0,h.TL)(),t=(0,s.UO)(),n=(0,l.v9)(u.HQ),[b,k]=(0,i.useState)(!0),[I,R]=(0,i.useState)([]),[T,_]=(0,i.useState)(!1),[g,N]=(0,i.useState)(!1),[F,A]=(0,i.useState)(!1),[f,O]=(0,i.useState)(""),[C,y]=(0,i.useState)([]),[P,v]=(0,i.useState)(!1),w=t.bucketName||"",E=(0,a.F)(w,[o.Ft.S3_GET_REPLICATION_CONFIGURATION,o.Ft.S3_GET_ACTIONS]);(0,i.useEffect)((()=>{e((0,d.Sc)("bucket_detail_replication"))}),[]),(0,i.useEffect)((()=>{n&&k(!0)}),[n,k]),(0,i.useEffect)((()=>{b&&(E?r.Z.invoke("GET","/api/v1/buckets/".concat(w,"/replication")).then((e=>{const t=e.rules?e.rules:[];t.sort(((e,t)=>e.priority-t.priority)),R(t),k(!1)})).catch((t=>{e((0,d.Ih)(t)),k(!1)})):k(!1))}),[b,e,w,E]);const U=function(){N(arguments.length>0&&void 0!==arguments[0]&&arguments[0])},G=(0,s.s0)(),Z=[{type:"delete",onClick:e=>{O(e.id),v(!1),_(!0)}},{type:"view",onClick:e=>{O(e.id),G("/buckets/edit-replication?bucketName=".concat(w,"&ruleID=").concat(e.id))},disableButtonFunction:!(0,a.F)(w,[o.Ft.S3_PUT_REPLICATION_CONFIGURATION,o.Ft.S3_PUT_ACTIONS],!0)}];return(0,m.jsxs)(i.Fragment,{children:[g&&(0,m.jsx)(j,{closeModalAndRefresh:()=>{U(!1),k(!0)},open:g,bucketName:w,setReplicationRules:I}),T&&(0,m.jsx)(S,{deleteOpen:T,selectedBucket:w,closeDeleteModalAndRefresh:e=>{_(!1),e&&k(!0)},ruleToDelete:f,rulesToDelete:C,remainingRules:I.length,allSelected:I.length>0&&C.length===I.length,deleteSelectedRules:P}),F&&(0,m.jsx)(x,{closeModalAndRefresh:e=>{A(!1),e&&k(!0)},open:F,bucketName:w,ruleID:f}),(0,m.jsx)(c.NZf,{separator:!0,sx:{marginBottom:15},actions:(0,m.jsxs)(c.xuv,{style:{display:"flex",gap:10},children:[(0,m.jsx)(a.s,{scopes:[o.Ft.S3_PUT_REPLICATION_CONFIGURATION,o.Ft.S3_PUT_ACTIONS],resource:w,matchAll:!0,errorProps:{disabled:!0},children:(0,m.jsx)(p.Z,{tooltip:"Remove Selected Replication Rules",children:(0,m.jsx)(c.zxk,{id:"remove-bucket-replication-rule",onClick:()=>{O("selectedRules"),v(!0),_(!0)},label:"Remove Selected Rules",icon:(0,m.jsx)(c.XHJ,{}),color:"secondary",disabled:0===C.length||0===I.length,variant:"secondary"})})}),(0,m.jsx)(a.s,{scopes:[o.Ft.S3_PUT_REPLICATION_CONFIGURATION,o.Ft.S3_PUT_ACTIONS],resource:w,matchAll:!0,errorProps:{disabled:!0},children:(0,m.jsx)(p.Z,{tooltip:"Add Replication Rule",children:(0,m.jsx)(c.zxk,{id:"add-bucket-replication-rule",onClick:()=>{U(!0)},label:"Add Replication Rule",icon:(0,m.jsx)(c.dtP,{}),variant:"callAction"})})})]}),children:(0,m.jsx)(c.SYi,{content:(0,m.jsxs)(i.Fragment,{children:["MinIO"," ",(0,m.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/bucket-replication.html",children:"server-side bucket replication"})," ","is an automatic bucket-level configuration that synchronizes objects between a source and destination bucket."]}),placement:"right",children:"Replication"})}),(0,m.jsxs)(c.rjZ,{container:!0,children:[(0,m.jsx)(c.rjZ,{item:!0,xs:12,children:(0,m.jsx)(a.s,{scopes:[o.Ft.S3_GET_REPLICATION_CONFIGURATION,o.Ft.S3_GET_ACTIONS],resource:w,errorProps:{disabled:!0},children:(0,m.jsx)(c.wQF,{itemActions:Z,columns:[{label:"Priority",elementKey:"priority",width:55,contentTextAlign:"center"},{label:"Destination",elementKey:"destination",renderFunction:e=>(0,m.jsx)(i.Fragment,{children:e.bucket.replace("arn:aws:s3:::","")})},{label:"Prefix",elementKey:"prefix",width:200},{label:"Tags",elementKey:"tags",renderFunction:e=>(0,m.jsx)(i.Fragment,{children:e&&""!==e.tags?"Yes":"No"}),width:60},{label:"Status",elementKey:"status",width:100}],isLoading:b,records:I,entityName:"Replication Rules",idField:"id",customPaperHeight:"400px",textSelectable:!0,selectedItems:C,onSelect:e=>(e=>{const t=e.target,n=t.value,i=t.checked;let l=[...C];return i?l.push(n):l=l.filter((e=>e!==n)),y(l),l})(e),onSelectAll:()=>{C.length!==I.length?y(I.map((e=>e.id))):y([])}})})}),(0,m.jsxs)(c.rjZ,{item:!0,xs:12,children:[(0,m.jsx)("br",{}),(0,m.jsx)(c.KfX,{title:"Replication",iconComponent:(0,m.jsx)(c.wNb,{}),help:(0,m.jsxs)(i.Fragment,{children:["MinIO supports server-side and client-side replication of objects between source and destination buckets.",(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),"You can learn more at our"," ",(0,m.jsx)("a",{href:"https://min.io/docs/minio/linux/administration/bucket-replication.html?ref=con",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})]})]})]})}}}]);
//# sourceMappingURL=5759.d4235433.chunk.js.map