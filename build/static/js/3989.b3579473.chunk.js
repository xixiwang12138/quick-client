"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[3989],{93989:(e,s,t)=>{t.r(s),t.d(s,{default:()=>B});var n=t(72791),i=t(26181),l=t.n(i),a=t(78687),r=t(57689),c=t(31776),o=t(82342),d=t(29945),u=t(23814),x=t(56087),h=t(38442),p=t(87995),m=t(9859),j=t(44690),f=t(84861),b=t(80184);const g=e=>{var s,t;let{versioningState:n={}}=e;return(0,b.jsxs)(d.xuv,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,b.jsx)(d.xuv,{sx:{fontWeight:"medium",display:"flex",gap:2},children:n.excludeFolders?(0,b.jsx)(f.Z,{icon:n.excludeFolders?(0,b.jsx)(d.E31,{style:{color:"green"}}):(0,b.jsx)(d.dRf,{}),label:(0,b.jsx)("label",{style:{textDecoration:"normal"},children:"Exclude Folders"})}):null}),null!==(s=n.excludedPrefixes)&&void 0!==s&&s.length?(0,b.jsxs)(d.xuv,{sx:{fontWeight:"medium",display:"flex",justifyItems:"end",placeItems:"flex-start",flexDirection:"column",gap:1},children:[(0,b.jsx)(d.xuv,{children:"Excluded Prefixes :"}),(0,b.jsx)("div",{style:{maxHeight:"200px",overflowY:"auto",placeItems:"flex-start",justifyItems:"end",flexDirection:"column",display:"flex"},children:null===(t=n.excludedPrefixes)||void 0===t?void 0:t.map((e=>(0,b.jsx)("div",{children:(0,b.jsx)("strong",{children:e.prefix})})))})]}):null]})};var S=t(75578);const T=e=>{let{disabled:s,onClick:t,...n}=e;return(0,b.jsx)(d.hU,{size:"small",disabled:s,onClick:t,...n,children:(0,b.jsx)(d.dY8,{})})},_=e=>{let{resourceName:s,iamScopes:t,secureCmpProps:n={},children:i}=e;return(0,b.jsx)(h.s,{scopes:t,resource:s,errorProps:{disabled:!0},...n,children:i})},E=e=>{let{isLoading:s=!0,resourceName:t="",iamScopes:n,secureCmpProps:i={},property:l=null,value:a=null,onEdit:r,disabled:c=!1,helpTip:o}=e;return(0,b.jsxs)(d.xuv,{sx:{display:"flex",alignItems:"baseline",justifyContent:"flex-start",gap:10},children:[(0,b.jsx)(d.kKA,{label:l,value:o?(0,b.jsx)(_,{resourceName:t,iamScopes:n,secureCmpProps:i,children:(0,b.jsx)(d.SYi,{placement:"left",content:o,children:(0,b.jsx)(d.vmT,{isLoading:s,onClick:r,label:a,sx:{fontWeight:"bold"},disabled:c})})}):(0,b.jsx)(_,{resourceName:t,iamScopes:n,secureCmpProps:i,children:(0,b.jsx)(d.vmT,{isLoading:s,onClick:r,label:a,sx:{fontWeight:"bold"},disabled:c})})}),(0,b.jsx)(_,{resourceName:t,iamScopes:n,secureCmpProps:i,children:(0,b.jsx)(T,{onClick:r,sx:{background:"#f8f8f8",marginLeft:"3px",top:3,"& .min-icon":{width:"16px",height:"16px"}},disabled:c})})]})};var v=t(45248);const y=e=>{let{bucketSize:s}=e;return(0,b.jsxs)(d.xuv,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,b.jsx)(d.Mhr,{}),(0,b.jsxs)(d.xuv,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,b.jsx)("label",{style:{fontWeight:600},children:"Reported Usage:"}),(0,b.jsx)("label",{children:(0,v.ae)(s)})]})]})},C=e=>{let{quota:s}=e;return(0,b.jsxs)(d.xuv,{sx:{display:"flex",alignItems:"center","& .min-icon":{height:37,width:37}},children:[(0,b.jsx)(d.sjJ,{}),(0,b.jsxs)(d.xuv,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexFlow:"column",marginLeft:"20px",fontSize:"19px"},children:[(0,b.jsxs)("label",{style:{fontWeight:600,textTransform:"capitalize"},children:[null===s||void 0===s?void 0:s.type," Quota"]}),(0,b.jsxs)("label",{children:[" ",(0,v.ae)("".concat(null===s||void 0===s?void 0:s.quota),!0)]})]})]})},I=(0,S.Z)(n.lazy((()=>t.e(3690).then(t.bind(t,33690))))),N=(0,S.Z)(n.lazy((()=>t.e(1604).then(t.bind(t,1604))))),k=(0,S.Z)(n.lazy((()=>t.e(9952).then(t.bind(t,99952))))),O=(0,S.Z)(n.lazy((()=>t.e(402).then(t.bind(t,70402))))),F=(0,S.Z)(n.lazy((()=>t.e(1705).then(t.bind(t,71705))))),A=(0,S.Z)(n.lazy((()=>t.e(1581).then(t.bind(t,1581))))),B=()=>{var e;const s=(0,j.TL)(),t=(0,r.UO)(),i=(0,a.v9)(m.HQ),S=(0,a.v9)(m.G6),T=(0,a.v9)(p.N5),[_,v]=(0,n.useState)(null),[B,U]=(0,n.useState)("0"),[R,G]=(0,n.useState)(!1),[P,K]=(0,n.useState)(!1),[w,L]=(0,n.useState)(!1),[M,Z]=(0,n.useState)(!0),[z,D]=(0,n.useState)(!0),[Y,W]=(0,n.useState)(!0),[Q,V]=(0,n.useState)(!0),[q,J]=(0,n.useState)(!0),[H,X]=(0,n.useState)(!0),[$,ee]=(0,n.useState)(!0),[se,te]=(0,n.useState)(!0),[ne,ie]=(0,n.useState)(),[le,ae]=(0,n.useState)(!1),[re,ce]=(0,n.useState)(null),[oe,de]=(0,n.useState)(!1),[ue,xe]=(0,n.useState)(!1),[he,pe]=(0,n.useState)(null),[me,je]=(0,n.useState)(!1),[fe,be]=(0,n.useState)(!1),[ge,Se]=(0,n.useState)(!1),[Te,_e]=(0,n.useState)(!1);(0,n.useEffect)((()=>{s((0,p.Sc)("bucket_detail_summary"))}),[]);const Ee=t.bucketName||"";let ve="n/a",ye="";null!==S&&S.access&&S.definition&&(ve=S.access,ye=S.definition);const Ce=(0,h.F)(Ee,[x.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION,x.Ft.S3_GET_ACTIONS]),Ie=(0,h.F)(Ee,[x.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,x.Ft.S3_GET_ACTIONS]),Ne=(0,h.F)(Ee,[x.Ft.ADMIN_GET_BUCKET_QUOTA]);(0,n.useEffect)((()=>{W(!!i)}),[i,W]),(0,n.useEffect)((()=>{Q&&(Ie?c.h.buckets.getBucketEncryptionInfo(Ee).then((e=>{e.data.algorithm&&(de(!0),v(e.data)),V(!1)})).catch((e=>{"The server side encryption configuration was not found"===(e=(0,o.g)(e.error)).errorMessage&&(de(!1),v(null)),V(!1)})):(de(!1),v(null),V(!1)))}),[Q,Ee,Ie]),(0,n.useEffect)((()=>{q&&T&&c.h.buckets.getBucketVersioning(Ee).then((e=>{ie(e.data),J(!1)})).catch((e=>{s((0,p.Ih)((0,o.g)(e.error))),J(!1)}))}),[q,s,Ee,T]),(0,n.useEffect)((()=>{H&&T&&(Ne?c.h.buckets.getBucketQuota(Ee).then((e=>{ce(e.data),e.data.quota?ae(!0):ae(!1),X(!1)})).catch((e=>{s((0,p.Ih)((0,o.g)(e.error))),ae(!1),X(!1)})):(ae(!1),X(!1)))}),[H,J,s,Ee,T,Ne]),(0,n.useEffect)((()=>{q&&T&&(Ce?c.h.buckets.getBucketObjectLockingStatus(Ee).then((e=>{G(e.data.object_locking_enabled),Z(!1)})).catch((e=>{s((0,p.Ih)((0,o.g)(e.error))),Z(!1)})):Z(!1))}),[M,s,Ee,q,T,Ce]),(0,n.useEffect)((()=>{z&&c.h.buckets.listBuckets().then((e=>{const s=l()(e.data,"buckets",[]).find((e=>e.name===Ee)),t=l()(s,"size","0");D(!1),U(t)})).catch((e=>{D(!1),s((0,p.Ih)((0,o.g)(e.error)))}))}),[z,s,Ee]),(0,n.useEffect)((()=>{$&&T&&c.h.buckets.getBucketReplication(Ee).then((e=>{const s=e.data.rules?e.data.rules:[];L(s.length>0),ee(!1)})).catch((e=>{s((0,p.Ih)((0,o.g)(e.error))),ee(!1)}))}),[$,s,Ee,T]),(0,n.useEffect)((()=>{se&&R&&c.h.buckets.getBucketRetentionConfig(Ee).then((e=>{te(!1),xe(!0),pe(e.data)})).catch((e=>{xe(!1),te(!1),pe(null)}))}),[se,R,Ee]);const ke=()=>{s((0,m.d5)(!0)),W(!0),D(!0),J(!0),V(!0),te(!0)};let Oe=null===ne||void 0===ne?void 0:ne.status,Fe="Unversioned (Default)";return"Enabled"===Oe?Fe="Versioned":"Suspended"===Oe&&(Fe="Suspended"),(0,b.jsxs)(n.Fragment,{children:[fe&&(0,b.jsx)(k,{open:fe,selectedBucket:Ee,encryptionEnabled:oe,encryptionCfg:_,closeModalAndRefresh:()=>{be(!1),V(!0)}}),ge&&(0,b.jsx)(A,{open:ge,selectedBucket:Ee,enabled:le,cfg:re,closeModalAndRefresh:()=>{Se(!1),X(!0)}}),P&&(0,b.jsx)(I,{bucketName:Ee,open:P,actualPolicy:ve,actualDefinition:ye,closeModalAndRefresh:()=>{K(!1),ke()}}),me&&(0,b.jsx)(N,{bucketName:Ee,open:me,closeModalAndRefresh:()=>{je(!1),ke()}}),Te&&(0,b.jsx)(O,{closeVersioningModalAndRefresh:e=>{_e(!1),e&&ke()},modalOpen:Te,selectedBucket:Ee,versioningInfo:ne,objectLockingEnabled:!!R}),(0,b.jsx)(d.NZf,{separator:!0,sx:{marginBottom:15},children:"Summary"}),(0,b.jsxs)(d.rjZ,{container:!0,children:[(0,b.jsx)(h.s,{scopes:[x.Ft.S3_GET_BUCKET_POLICY,x.Ft.S3_GET_ACTIONS],resource:Ee,children:(0,b.jsx)(d.rjZ,{item:!0,xs:12,children:(0,b.jsxs)(d.xuv,{sx:u.nl,children:[(0,b.jsxs)(d.xuv,{sx:u.nl,children:[(0,b.jsx)(h.s,{scopes:[x.Ft.S3_GET_BUCKET_POLICY,x.Ft.S3_GET_ACTIONS],resource:Ee,children:(0,b.jsx)(E,{iamScopes:[x.Ft.S3_PUT_BUCKET_POLICY,x.Ft.S3_PUT_ACTIONS],resourceName:Ee,property:"Access Policy:",value:ve.toLowerCase(),onEdit:()=>{K(!0)},isLoading:Y,helpTip:(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)("strong",{children:"Private"})," policy limits access to credentialled accounts with appropriate permissions",(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"Public"})," policy anyone will be able to upload, download and delete files from this Bucket once logged in",(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"Custom"})," policy can be written to define which accounts are authorized to access this Bucket",(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),"To allow Bucket access without credentials, use the"," ",(0,b.jsx)("a",{href:"/buckets/".concat(Ee,"/admin/prefix"),children:"Anonymous"})," ","setting"]})})}),(0,b.jsx)(h.s,{scopes:[x.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,x.Ft.S3_GET_ACTIONS],resource:Ee,children:(0,b.jsx)(E,{iamScopes:[x.Ft.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION,x.Ft.S3_PUT_ACTIONS],resourceName:Ee,property:"Encryption:",value:oe?"Enabled":"Disabled",onEdit:()=>{be(!0)},isLoading:Q,helpTip:(0,b.jsxs)(n.Fragment,{children:["MinIO supports enabling automatic"," ",(0,b.jsx)("a",{href:"https://min.io/docs/minio/kubernetes/upstream/administration/server-side-encryption/server-side-encryption-sse-kms.html",target:"blank",children:"SSE-KMS"})," ","and"," ",(0,b.jsx)("a",{href:"https://min.io/docs/minio/kubernetes/upstream/administration/server-side-encryption/server-side-encryption-sse-s3.html",target:"blank",children:"SSE-S3"})," ","encryption of all objects written to a bucket using a specific External Key (EK) stored on the external KMS."]})})}),(0,b.jsx)(h.s,{scopes:[x.Ft.S3_GET_REPLICATION_CONFIGURATION,x.Ft.S3_GET_ACTIONS],resource:Ee,children:(0,b.jsx)(d.kKA,{label:"Replication:",value:(0,b.jsx)(f.Z,{icon:w?(0,b.jsx)(d.E31,{}):(0,b.jsx)(d.dRf,{}),label:(0,b.jsx)("label",{className:"muted",children:w?"Enabled":"Disabled"})})})}),(0,b.jsx)(h.s,{scopes:[x.Ft.S3_GET_BUCKET_OBJECT_LOCK_CONFIGURATION,x.Ft.S3_GET_ACTIONS],resource:Ee,children:(0,b.jsx)(d.kKA,{label:"Object Locking:",value:(0,b.jsx)(f.Z,{icon:R?(0,b.jsx)(d.E31,{}):(0,b.jsx)(d.dRf,{}),label:(0,b.jsx)("label",{className:"muted",children:R?"Enabled":"Disabled"})})})}),(0,b.jsx)(d.xuv,{children:(0,b.jsx)(d.kKA,{label:"Tags:",value:(0,b.jsx)(F,{bucketName:Ee})})}),(0,b.jsx)(E,{iamScopes:[x.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:Ee,property:"Quota:",value:le?"Enabled":"Disabled",onEdit:()=>{Se(!0)},isLoading:H,helpTip:(0,b.jsxs)(n.Fragment,{children:["Setting a"," ",(0,b.jsx)("a",{href:"https://min.io/docs/minio/linux/reference/minio-mc/mc-quota-set.html",target:"blank",children:"quota"})," ","assigns a hard limit to a bucket beyond which MinIO does not allow writes."]})})]}),(0,b.jsxs)(d.xuv,{sx:{display:"grid",gridTemplateColumns:"1fr",alignItems:"flex-start"},children:[(0,b.jsx)(y,{bucketSize:"".concat(B)}),le&&re?(0,b.jsx)(C,{quota:re}):null]})]})})}),T&&(0,b.jsx)(h.s,{scopes:[x.Ft.S3_GET_BUCKET_VERSIONING,x.Ft.S3_GET_ACTIONS],resource:Ee,children:(0,b.jsxs)(d.rjZ,{item:!0,xs:12,sx:{marginTop:5},children:[(0,b.jsx)(d.NZf,{separator:!0,sx:{marginBottom:15},children:"Versioning"}),(0,b.jsx)(d.xuv,{sx:u.nl,children:(0,b.jsxs)(d.xuv,{sx:u.nl,children:[(0,b.jsx)(E,{iamScopes:[x.Ft.S3_PUT_BUCKET_VERSIONING,x.Ft.S3_PUT_ACTIONS],resourceName:Ee,property:"Current Status:",value:(0,b.jsx)(d.xuv,{sx:{display:"flex",flexDirection:"column",textDecorationStyle:"initial",placeItems:"flex-start",justifyItems:"flex-start",gap:3},children:(0,b.jsxs)("div",{children:[" ",Fe]})}),onEdit:()=>{_e(!0)},isLoading:q,disabled:R}),"Enabled"===(null===ne||void 0===ne?void 0:ne.status)?(0,b.jsx)(g,{versioningState:ne}):null]})})]})}),R&&(0,b.jsx)(h.s,{scopes:[x.Ft.S3_GET_OBJECT_RETENTION,x.Ft.S3_GET_ACTIONS],resource:Ee,children:(0,b.jsxs)(d.rjZ,{item:!0,xs:12,sx:{marginTop:5},children:[(0,b.jsx)(d.NZf,{separator:!0,sx:{marginBottom:15},children:"Retention"}),(0,b.jsx)(d.xuv,{sx:u.nl,children:(0,b.jsxs)(d.xuv,{sx:u.nl,children:[(0,b.jsx)(E,{iamScopes:[x.Ft.ADMIN_SET_BUCKET_QUOTA],resourceName:Ee,property:"Retention:",value:ue?"Enabled":"Disabled",onEdit:()=>{je(!0)},isLoading:se,helpTip:(0,b.jsxs)(n.Fragment,{children:["MinIO"," ",(0,b.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/macos/administration/object-management.html#object-retention",children:"Object Locking"})," ","enforces Write-Once Read-Many (WORM) immutability to protect versioned objects from deletion."]})}),(0,b.jsx)(d.kKA,{label:"Mode:",value:(0,b.jsx)("label",{className:"muted",style:{textTransform:"capitalize"},children:he&&he.mode?he.mode:"-"})}),(0,b.jsx)(d.kKA,{label:"Validity:",value:(0,b.jsxs)("label",{className:"muted",style:{textTransform:"capitalize"},children:[he&&he.validity," ",he&&(1===he.validity?null===(e=he.unit)||void 0===e?void 0:e.slice(0,-1):he.unit)]})})]})})]})})]})]})}},84861:(e,s,t)=>{t.d(s,{Z:()=>l});t(72791);var n=t(29945),i=t(80184);const l=e=>{let{icon:s=null,label:t=null}=e;return(0,i.jsxs)(n.xuv,{sx:{display:"flex",alignItems:"center",gap:5,marginTop:3},children:[(0,i.jsx)(n.xuv,{sx:{height:16,width:16,display:"flex",alignItems:"center"},children:s}),(0,i.jsx)(n.xuv,{children:t})]})}}}]);
//# sourceMappingURL=3989.b3579473.chunk.js.map